{"version":3,"sources":["webpack:///./src/views/add/addDevice.vue?8a05","webpack:///./src/views/add/addDevice.vue?adb3","webpack:///src/views/add/addDevice.vue","webpack:///./src/views/add/addDevice.vue?4a17","webpack:///./src/views/add/addDevice.vue","webpack:///./src/assets/img/device/sys.png"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_addDevice_vue_vue_type_style_index_0_id_3c2c22a5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_addDevice_vue_vue_type_style_index_0_id_3c2c22a5_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","deviceId","on","click","sys","attrs","src","alt","directives","name","rawName","value","expression","type","placeholder","domProps","input","$event","target","composing","add","staticRenderFns","addDevicevue_type_script_lang_js_","[object Object]","timer","clearTimeout","$axios","get","url","encodeURIComponent","window","location","href","split","then","message","console","log","wx","config","debug","appId","data","timestamp","nonceStr","signature","jsApiList","$route","query","methods","that","ready","scanQRCode","needResult","scanType","success","res","result","resultStr","substring","indexOf","$router","push","path","alias","userId","localStorage","getItem","post","JSON","stringify","code","Object","toast","setTimeout","add_addDevicevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","module","exports"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAA0fE,EAAG,8CCA7f,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,aAAwB,CAAAF,EAAA,OAAYE,YAAA,gBAA2B,CAAAF,EAAA,OAAAA,EAAA,QAAAJ,EAAAO,GAAA,QAAAH,EAAA,QAAAJ,EAAAO,GAAAP,EAAAQ,GAAAR,EAAAS,eAAAL,EAAA,QAA6FM,GAAA,CAAIC,MAAAX,EAAAY,MAAiB,CAAAR,EAAA,OAAYS,MAAA,CAAOC,IAAMlB,EAAQ,QAAiCmB,IAAA,UAAYX,EAAA,OAAAA,EAAA,QAAAJ,EAAAO,GAAA,UAAAH,EAAA,SAAwDY,WAAA,EAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAnB,EAAA,KAAAoB,WAAA,SAAkEd,YAAA,aAAAO,MAAA,CAAkCQ,KAAA,OAAAC,YAAA,WAAsCC,SAAA,CAAWJ,MAAAnB,EAAA,MAAmBU,GAAA,CAAKc,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsC3B,EAAAiB,KAAAQ,EAAAC,OAAAP,eAA+Bf,EAAA,OAAgBE,YAAA,MAAAI,GAAA,CAAsBC,MAAAX,EAAA4B,MAAiB,CAAA5B,EAAAO,GAAA,aAChvBsB,EAAA,2BCmBAC,EAAA,CACAb,KAAA,YACAc,OACA,OACAtB,SAAA,WACAQ,KAAA,GACAe,MAAA,KAIAD,gBACAE,aAAAhC,KAAA+B,QAGAD,eAEA9B,KAAAiC,OACAC,OACAlC,KAAAmC,sCACAC,mBAAAC,OAAAC,SAAAC,KAAAC,MAAA,YAGAC,KAAAC,IACAC,QAAAC,IAAAF,GACAG,GAAAC,OAAA,CACAC,OAAA,EACAC,MAAAN,EAAAO,UAAAD,MACAE,UAAAR,EAAAO,UAAAC,UACAC,SAAAT,EAAAO,UAAAE,SACAC,UAAAV,EAAAO,UAAAG,UACAC,UAAA,oBAKAvB,UACA9B,KAAAQ,SAAAR,KAAAsD,OAAAC,MAAA/C,UAGAgD,QAAA,CACA1B,MACA,IAAA2B,EAAAzD,KACA6C,GAAAa,MAAA,WACAb,GAAAc,WAAA,CACAC,WAAA,EACAC,SAAA,qBACAC,QAAA,SAAAC,GACApB,QAAAC,IAAAmB,GACA,IAAAC,EAAAD,EAAAE,UACAzD,EAAAwD,EAAAE,UAAAF,EAAAG,QAAA,YAAAH,EAAAG,QAAA,MACAV,EAAAW,QAAAC,KAAA,CAAAC,KAAA,aAAAf,MAAA,CAAA/C,oBAKAsB,UAGAA,MACA,IAAAmB,EAAA,CACAsB,MAAAvE,KAAAgB,KACAwD,OAAAC,aAAAC,QAAA,UACAlE,SAAAR,KAAAQ,UAEAiD,EAAAzD,KACAmC,EAAAnC,KAAAmC,IAAA,4BACAQ,QAAAC,IAAAK,GACAjD,KAAAiC,OAAA0C,KAAAxC,EAAAyC,KAAAC,UAAA5B,IAAAR,KAAAsB,IACApB,QAAAC,IAAAmB,GACA,KAAAA,EAAAd,KAAA6B,MACUC,OAAAC,EAAA,KAAAD,CAAVhB,EAAAd,KAAAP,SACA1C,KAAAoE,QAAAC,KAAA,gBAEA,KAAAN,EAAAd,KAAA6B,MACUC,OAAAC,EAAA,KAAAD,CAAVhB,EAAAd,KAAAP,SACAe,EAAA1B,MAAAkD,WAAA,KACAxB,EAAAW,QAAAC,KAAA,gBACA,MAEUU,OAAAC,EAAA,KAAAD,CAAVhB,EAAAd,KAAAP,cCnGkWwC,EAAA,0BCQlWC,EAAgBJ,OAAAK,EAAA,KAAAL,CACdG,EACApF,EACA8B,GACF,EACA,KACA,WACA,MAIeyD,EAAA,WAAAF,qDCnBfG,EAAAC,QAAA","file":"static/js/chunk-5b3cca31.4bd71d8e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addDevice.vue?vue&type=style&index=0&id=3c2c22a5&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addDevice.vue?vue&type=style&index=0&id=3c2c22a5&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addDevice\"},[_c('div',{staticClass:\"addDeviceTop\"},[_c('div',[_c('span',[_vm._v(\"设备: \"),_c('span',[_vm._v(_vm._s(_vm.deviceId))])]),_c('span',{on:{\"click\":_vm.sys}},[_c('img',{attrs:{\"src\":require(\"../../assets/img/device/sys.png\"),\"alt\":\"\"}})])]),_c('div',[_c('span',[_vm._v(\"设备名称\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"deviceName\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入设备名称\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})])]),_c('div',{staticClass:\"add\",on:{\"click\":_vm.add}},[_vm._v(\"立即添加\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 添加设备 -->\r\n<template>\r\n  <div class=\"addDevice\">\r\n    <div class=\"addDeviceTop\">\r\n      <div>\r\n        <span>设备: <span>{{deviceId}}</span></span>\r\n        <span @click=\"sys\"><img src=\"../../assets/img/device/sys.png\" alt=\"\"></span>\r\n      </div>\r\n      <div>\r\n        <span>设备名称</span>\r\n        <input class=\"deviceName\" type=\"text\" v-model=\"name\" placeholder=\"请输入设备名称\">\r\n      </div>\r\n    </div>\r\n    <!-- <div class=\"start\" @click=\"start\">校准设备</div> -->\r\n    <div class=\"add\" @click=\"add\">立即添加</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from \"vant\"\r\nexport default {\r\n  name: \"addDevice\",\r\n  data () {\r\n    return {\r\n      deviceId:2569874112,\r\n      name: \"\",\r\n      timer: \"\",\r\n    };\r\n  },\r\n\r\n  beforeDestroy () {\r\n    clearTimeout(this.timer);\r\n  },\r\n\r\n  beforeCreate() {\r\n    let that = this;\r\n    this.$axios\r\n      .get(\r\n        `${this.url}/weChat/message/JSSDKTicket?url=${\r\n          encodeURIComponent(window.location.href.split(\"#\")[0])\r\n        }`\r\n      )\r\n      .then(message => {\r\n        console.log(message);\r\n        wx.config({\r\n          debug: false,\r\n          appId: message.data.data.appId,\r\n          timestamp: message.data.data.timestamp,\r\n          nonceStr: message.data.data.nonceStr,\r\n          signature: message.data.data.signature, // 必填，签名，见附录1\r\n          jsApiList: [\"scanQRCode\"]\r\n        });\r\n      });\r\n  },\r\n\r\n  created(){\r\n    this.deviceId = this.$route.query.deviceId;\r\n  },\r\n\r\n  methods: {\r\n    sys(){\r\n      let that = this;\r\n      wx.ready(function() {\r\n        wx.scanQRCode({\r\n          needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，\r\n          scanType: [\"qrCode\", \"barCode\"], // 可以指定扫二维码还是一维码，默认二者都有\r\n          success: function(res) {\r\n            console.log(res);\r\n            let result = res.resultStr; // 当needResult 为 1 时，扫码返回的结果\r\n            let deviceId = result.substring(result.indexOf('state=') + 6, result.indexOf('#'));                \r\n            that.$router.push({path: '/addDevice',query: {deviceId:deviceId}})               \r\n          }\r\n        });\r\n      });\r\n    },\r\n    start(){\r\n\r\n    },\r\n    add(){\r\n      let data = {\r\n        alias: this.name,\r\n        userId: localStorage.getItem(\"openId\"),\r\n        deviceId: this.deviceId\r\n      };\r\n      let that = this;\r\n      let url = this.url + \"/device/dmInfo/bindDevice\";\r\n      console.log(data);\r\n      this.$axios.post(url,JSON.stringify(data)).then((res)=>{\r\n        console.log(res);\r\n        if(res.data.code==200){\r\n          Toast(res.data.message);  \r\n          this.$router.push(\"/deviceList\");      \r\n          // this.$router.push({path:\"/calibrationone\",query:{deviceId:that.deviceId}});\r\n        }else if(res.data.code==5000){\r\n          Toast(res.data.message);\r\n          that.timer = setTimeout(()=>{\r\n            that.$router.push(\"/deviceList\");  \r\n          },1000);           \r\n        }else{\r\n          Toast(res.data.message);\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n  .addDevice{\r\n    min-height: 100%;\r\n    padding: 20px 16px;\r\n  }\r\n  .addDeviceTop{\r\n    background: #fff;\r\n    border-radius: 10px;\r\n    font-size: 15px;\r\n    color: #2F2F2F;\r\n  }\r\n  .addDeviceTop>div{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    /* height: 54px;\r\n    line-height: 54px; */\r\n    padding: 16px;\r\n  }\r\n  .addDeviceTop>div>span{\r\n    height: 21px;\r\n    line-height: 21px;\r\n  }\r\n  .addDeviceTop>div:first-of-type>span:last-of-type{\r\n    display: inline-block;\r\n    width: 30px;\r\n    text-align: right;\r\n  }\r\n  .addDeviceTop>div:first-of-type img{\r\n    width: 19px;\r\n    height: 19px;\r\n  }\r\n  .addDeviceTop>div:first-of-type{\r\n    position: relative;\r\n  }\r\n  .addDeviceTop>div:first-of-type::after{\r\n    position: absolute;\r\n    box-sizing: border-box;\r\n    content: ' ';\r\n    pointer-events: none;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 16px;\r\n    right: 16px;\r\n    -webkit-transform: scaleY(0.5);\r\n    transform: scaleY(0.5);\r\n    border-bottom: 1px solid #EDEDED;\r\n  }\r\n  .deviceName{\r\n    text-align: right;\r\n    border: none;\r\n  }\r\n  .start, .add{\r\n    background: #fff;\r\n    font-size: 15px;\r\n    height: 45px;\r\n    line-height: 45px;\r\n    text-align: center;\r\n    border-radius: 10px;\r\n  }\r\n  .start{\r\n    color: #303030;\r\n    margin: 12px 0;\r\n  }\r\n  .add{\r\n    margin-top: 12px;\r\n    color: #146DE5;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addDevice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addDevice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addDevice.vue?vue&type=template&id=3c2c22a5&scoped=true&\"\nimport script from \"./addDevice.vue?vue&type=script&lang=js&\"\nexport * from \"./addDevice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addDevice.vue?vue&type=style&index=0&id=3c2c22a5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c2c22a5\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAYAAADFniADAAABEElEQVRYhe2YQU7DMBBFLfUAzUHCBk4F3KEcIcvq/Vjy3psWcY0ULlCxI6eoBBsHVSmIpC3yLPykv4mU8ZMT2aNxwBLYAJ9/RdJH0zSVm0EIoQL6KfWBZ2DpJL1MfGHIzRwp7309p76krRs9fAd2P0VSJ2k1R2hA0kpS91vttO63x7HUPsa4OGfRS4kxLoD9iZSkLofQQNrJk53a5ZRKn7FIFal/l3rLLPV6LNWnI+Gsg/GKUk9JqnchhGq9Xtc5hQa893UIYdbdWihMAriXtLUQYCPpYdxPmYgDDrklRjk44BZ4tJK2be9y/9KFyzB595nsEqz2U6Y7zyJVpK4qZXWWYG/qkmJjPmV1kmdu5vkF6WRKjulxFGYAAAAASUVORK5CYII=\""],"sourceRoot":""}