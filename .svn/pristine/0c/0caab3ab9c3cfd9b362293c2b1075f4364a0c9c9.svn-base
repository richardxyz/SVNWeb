webpackJsonp([20],{VA8P:function(t,e){},"bCl+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o=i("bOdI"),n=i.n(o),s=i("Dd8w"),r=i.n(s),l=i("mw3O"),c=i.n(l),d=(i("mtWM"),i("Au9i")),g=(i("HBl7"),i("gOiD"),i("NYxO")),p=i("UMo0"),m=(a={name:"parkingLot",data:function(){return{list:[],allmapList:[],parameter:"",parameterTwo:"",lista:[],cval:"",allLoaded:!1,moreLoading:!1,queryLoading:!1,page:0,listold:[],getLongitude:"",getLatitude:""}},components:{},watch:{list:{handler:function(t,e){this.list=t},deep:!0}},computed:{}},n()(a,"watch",{}),n()(a,"created",function(){var t=window.location.href.split("?")[1],e=t.split("&")[0].split("=")[1],i=t.split("&")[1].split("=")[1];localStorage.setItem("dLng",e),localStorage.setItem("dLat",i),localStorage.setItem("mLat",localStorage.getItem("dLat")),localStorage.setItem("mLng",localStorage.getItem("dLng"))}),n()(a,"mounted",function(){}),n()(a,"methods",r()({},Object(g.c)(["gatherparkmeg"]),{loadMore:function(){var t=this;console.log(1),this.allLoaded?this.moreLoading=!0:this.queryLoading||(this.moreLoading=!this.queryLoading,this.page++,this.$http({method:"post",url:this.httpUrl+"app/reserve/parkingloglistz",data:c.a.stringify({longitude:localStorage.getItem("mLng"),latitude:localStorage.getItem("mLat"),page:this.page,pageSize:100,parkingName:"山姆士超市学府街店"})}).then(function(e){console.log(e),"o8Aq-5v-iRRACkOyuOSAk8Fs0sbg"!=localStorage.getItem("openid")&&"o8Aq-5scVD4vnGs5fzj54wiLHz8Q"!=localStorage.getItem("openid")||e.data.result.ParkingLotDirectionList.forEach(function(t,i){128==t.id&&e.data.result.splice(i,3)}),console.log(e),"200"==e.data.resCode?(t.list=e.data.result.ParkingLotDirectionList,t.allLoaded=!0,t.parameter=1,t.moreLoading=t.allLoaded):(t.list=[],t.parameter=0,t.parameterTwo=0,t.queryLoading=!0)}))},openVip:function(t){console.log(t),window.location.href="http://cloud.parkingmore.cn/mp/total/indextingche.html?1562930068936#/people/vip?id="+t.id},select:function(t){var e=Object(p.y)().substring(11,13);e=0==e.substring(0,1)?e.substring(1,2):e.substring(0,2);var i=t.beginTime.substring(0,2);i=0==i.substring(0,1)?i.substring(1,2):i.substring(0,2);var a=t.endTime.substring(0,2);return a=0==a.substring(0,1)?a.substring(1,2):a.substring(0,2),console.log(e),console.log(i),console.log(a),"0"==t.count?(Object(d.MessageBox)("提示","该停车场暂无可预约车位"),!1):parseInt(i)>parseInt(e)||parseInt(e)>parseInt(a)?(Object(d.MessageBox)("提示","该停车场预约时间未到"),!1):(localStorage.setItem("tLng",t.longitude),localStorage.setItem("tLat",t.latitude),this.gatherparkmeg({id:t.id,price:t.price,name:t.parkingName,km:t.km,totalNumber:t.carportcount,count:t.count,remaining:t.ontimecount,timeout:t.timeOut,freeTime:t.freeTime,priceUnit:t.priceUnit}),void this.$router.push({path:"/parkingAppointment",query:{id:t.id,price:t.price,name:t.parkingName,km:t.km,totalNumber:t.carportcount,count:t.count,remaining:t.ontimecount,priceUnit:t.priceUnit,timeout:t.timeOut}}))}})),a),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#efefef",padding:"0.1rem 0"},attrs:{id:"parkingLot"}},[a("div",{staticStyle:{"-webkit-overflow-scrolling":"touch","overflow-scrolling":"touch","overflow-y":"scroll"}},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"newul",attrs:{"infinite-scroll-disabled":"moreLoading","infinite-scroll-distance":"10"}},[t._l(t.list,function(e,o){return a("li",{key:o,staticClass:"newcar"},[a("div",{staticClass:"newcardiv"},[a("div",{staticClass:"imgdiv"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i("ekC9"),expression:"require('../../static/image/th.jpg')"}],on:{click:function(i){t.select(e)}}})]),t._v(" "),a("div",{staticClass:"pdivl"},[a("p",{staticStyle:{"font-size":"0.3rem","font-weight":"bold","margin-top":"10px"}},[t._v(t._s(e.parkingName))]),t._v(" "),a("p",[t._v(t._s(e.price)+"元/"+t._s(e.priceUnit?e.priceUnit:"小时"))]),t._v(" "),a("p",[t._v("车位总量："+t._s(e.carportcount))]),t._v(" "),a("p",[t._v("可约总量："+t._s(e.ontimecount))]),t._v(" "),a("p",[t._v("可约剩余："+t._s(e.count))])]),t._v(" "),a("div",{staticClass:"pdiv",staticStyle:{width:"30%","margin-top":"0.4rem","text-align":"right","margin-right":"0.2rem"}},[a("p",[t._v(t._s(e.km.toFixed(1))+"km")]),t._v(" "),a("p",[t._v("可预约时间")]),t._v(" "),a("p",[t._v(t._s(e.beginTime)+"-"+t._s(e.endTime))])])]),t._v(" "),a("p",{staticStyle:{"margin-left":"0.2rem",width:"60%",overflow:"hidden",height:"15px","text-overflow":"ellipsis","-o-text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.parkingAddress)+"\n          ")]),t._v(" "),a("div",{staticClass:"bottomDiv",staticStyle:{"justify-content":"flex-end"}},[a("div",{staticClass:"savelink",on:{click:function(i){t.select(e)}}},[t._v("预约")])])])}),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:!t.queryLoading,expression:"!queryLoading"}],staticClass:"more_loading"},[a("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:t.moreLoading&&!t.allLoaded,expression:"moreLoading&&!allLoaded"}],staticStyle:{"margin-left":"0.8rem"},attrs:{type:"snake",color:"#00ccff",size:20}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.allLoaded,expression:"allLoaded"}],staticStyle:{"text-align":"center"}},[t._v("已全部加载")])],1)],2)]),t._v(" "),0==t.parameter&&0==t.parameterTwo?a("div",{staticClass:"kbBox"},[a("img",{staticClass:"kb",attrs:{src:i("x38g")}}),t._v(" "),a("p",[t._v("附近暂无停车场")])]):t._e(),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"allmap"}})])},staticRenderFns:[]};var v=i("VU/8")(m,u,!1,function(t){i("VA8P")},"data-v-4e3a6594",null);e.default=v.exports}});