webpackJsonp([6],{Ky3B:function(t,e){},LIqU:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQjQ2NEFFOTE2RDExRTk5OTkxQjBFQUM3NTEzRDU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQjQ2NEFGOTE2RDExRTk5OTkxQjBFQUM3NTEzRDU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJCNDY0QUM5MTZEMTFFOTk5OTFCMEVBQzc1MTNENTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJCNDY0QUQ5MTZEMTFFOTk5OTFCMEVBQzc1MTNENTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ydhmmAAABYklEQVR42mKcOXNmDQMDgyUQl6SlpV1nIAIwAXEzEHsB8bFZs2YxE6tpK5QtAMQngBplCWoCOskHSM+G8k2A+BJQoyo+TYz///8HM4AK5wKpJKj4ByCWARr4FZfzwACoIBnJRpBTzwINksdrEwwAFU4CUrlQ7msgNgYa+BirTUg25gGpdihXFIhPAQ2SwWsTko0dQKocyn0GxEZAA19itQnJxgog1QflSkFtlMBrE5KN6UBqBpQLsimQiVBEAm2cCaQKoFxxIG5iYiAOqCOxr7MQcBrI0F1A7AwVWgHEpfhCD2TgMSA2hQqtAjo1HGfoATWwgxIvkobFMA24UgQHkDoJxHpQoY1ADQE4UwRQgzAoPpA0bEDXgKIJqEEESF0DYl2oUBdQQyDOBAvUwAtkn0YK2p1ADR64QpVZSkoKZPJeIFaDii0CagjBFxWgYL2ExO8GaigjpoyAgW3EaAABgAADAOs3eZVOeKr7AAAAAElFTkSuQmCC"},dIaG:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABVklEQVQ4T3VTS1LCQBR8PckGWODSKqgST2C4gTcgnkC8AZSwdx8svIHxBIYb6AmMN8AqU+USF8AmSVszEQhhMrv5dL/X/XoglbV97AxJDChyDZEziqwg8gZh1JgkL+Xn2G228/NenjqvALwq4W5PMlZudtMY/yz1mQEbYOZ+6Ep1wD2ByEo5aV8TGPB61okhuDoF8gvEkGAogotyB61p0se/xmd7RS6hMGRuwL0jveAdNkE3EsigCiblF2BYGGfpirLAOuiuAGmXwTtgc5KMNkFnJMD8hFxPYTPr0npBeW9Ov/26zozbtsqGjBw3p8lT3b3pro4ZTnqZZ8oTqrAqqyCXhdVtCj9bk8TTk8hpDLutSoN22z5nLkmOlFIeKQ+nnhTkh4Slbmxtr4LUWpWbevuEHSLqRPakFQxajnIy/yjbZXKTuBy+CQekbVzVv0oxatwnYfntHya1tV1+uIzFAAAAAElFTkSuQmCC"},yx4X:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mtWM"),s=a.n(i),r=a("mw3O"),o=a.n(r),n=a("Au9i"),g={data:function(){return{markmoney:!1,shenum:0,sliky:!0,a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",y:"",appId:"",loack:"",timeStamp:"",nonceStr:"",package:"",signType:"",paySign:"",ticketNumber:"",disp:"",isTicket:"",numji:"",type:"",moneys:"",useMark:"",tradeNo:""}},mounted:function(){var t=this;this.$route.query.val&&(this.markmoney=!0),this.a=localStorage.getItem("carnumbar"),this.b=localStorage.getItem("longdate");var e=this.b.indexOf("小时"),a=this.b.indexOf("分钟");9==this.b.split("小时")[0]&&59==this.b.substring(e+2,a)&&(this.sliky=!1),this.c=localStorage.getItem("onsale_price"),this.d=localStorage.getItem("paid_price"),this.e=localStorage.getItem("paking_lot_name"),this.f=localStorage.getItem("price"),this.g=localStorage.getItem("startdate"),this.h=localStorage.getItem("time_out"),this.y=(Number(this.f)+Number(this.c)).toFixed(2),console.log(this.e),console.log(sessionStorage.getItem("ticknumbar2")),console.log(sessionStorage.getItem("ticknumbar3")),sessionStorage.getItem("ticknumbar1")&&0==sessionStorage.getItem("ticknumbar2")?(this.loack=2,this.disp=sessionStorage.getItem("ticknumbar1")):sessionStorage.getItem("ticknumbar4")?(this.loack=4,this.disp=sessionStorage.getItem("ticknumbar4")):(this.loack=3,this.disp=sessionStorage.getItem("ticknumbar2"),sessionStorage.getItem("ticknumbar2")||(this.loack=1)),this.$http({method:"post",url:this.newhttpUrl+"/MarkRecords/findMark",data:o.a.stringify({tel:localStorage.getItem("phone"),dealer:"1561430951496"})}).then(function(e){0==e.data.resCode?t.numji=e.data.result[0].allMark:t.numji=0}).catch(function(e){t.numji=0})},beforeCreate:function(){this.$http.get(this.oldhttpUrl+"/scan/getJSSDKTicket?url="+window.location.href.split("#")[0]).then(function(t){console.log(t),wx.config({debug:!1,appId:t.data.appid,timestamp:t.data.timestamp,nonceStr:t.data.nonceStr,signature:t.data.signature,jsApiList:["chooseWXPay"]}),console.log(111)})},methods:{addf:function(){if(""==this.numji)console.log(98);else{if(this.shenum>this.numji-this.mark02)return Object(n.MessageBox)("提示","积分不足"),!1;if(this.shenum=this.shenum+=this.mark02,this.y<1)return this.shenum=this.shenum-this.mark02,Object(n.MessageBox)("提示","已抵扣实付金额"),!1}},jian:function(){console.log(this.shenum),this.shenum<=0||(this.shenum=this.shenum-=this.mark02)},duihuan:function(){this.$router.push("/shengcheng")},tica:function(){this.$router.push({path:"/fuzhi",query:{websock:2}})},rightnow:function(){var t=this,e={},a=localStorage.getItem("openid");sessionStorage.getItem("ticknumbar3")&&this.$route.query.valmark&&(this.type=3,e={type:3,openId:a,money:this.y,carNumber:this.a,ip:returnCitySN.cip,mark:this.$route.query.valmark,ticketNumber:sessionStorage.getItem("ticknumbar3"),start:this.g}),sessionStorage.getItem("ticknumbar3")||this.$route.query.valmark?sessionStorage.getItem("ticknumbar3")?this.$route.query.valmark||(this.type=1,e={type:1,openId:a,money:this.y<0?0:this.y,carNumber:this.a,ip:returnCitySN.cip,ticketNumber:sessionStorage.getItem("ticknumbar3"),start:this.g,mark:0}):this.$route.query.valmark&&(this.type=2,e={type:2,openId:a,money:this.y,carNumber:this.a,ip:returnCitySN.cip,mark:this.$route.query.valmark,start:this.g}):(this.type=0,e={type:0,money:this.y,openId:a,carNumber:this.a,ip:returnCitySN.cip,start:this.g,mark:0}),console.log(e),this.$http({method:"post",url:this.httpUrl+"web/parkingPay/pay",data:o.a.stringify(e)}).then(function(e){if(console.log(e),t.tradeNo=e.data.result.tradeNo,0==e.data.resCode)if(e.data.result.useMark&&(t.useMark=e.data.result.useMark),0==e.data.result.price||e.data.result.price<0)t.$http({method:"post",url:t.httpUrl+"web/parkingPay/afterPay",data:o.a.stringify({parkingId:localStorage.getItem("parkingId"),carNumber:localStorage.getItem("carnumbar"),ticketNumber:sessionStorage.getItem("ticknumbar3")?sessionStorage.getItem("ticknumbar3"):null,mark:t.useMark?t.useMark:0,openId:localStorage.getItem("openid"),type:t.type,money:0,resId:t.tradeNo})}).then(function(e){Object(n.MessageBox)({title:"提示",message:"本次停车免费",closeOnClickModal:!1}).then(function(e){s()({method:"post",url:t.httpUrl+"app/reserve/selectResId",data:o.a.stringify({resId:t.$route.query.orderg})}).then(function(t){console.log(t)}),t.$router.push({path:"/homePage"})})});else{t.moneys=e.data.result.price,t.appId=e.data.result.appId,t.timeStamp=e.data.result.timeStamp,t.nonceStr=e.data.result.nonceStr,t.package=e.data.result.package,t.signType=e.data.result.signType,t.paySign=e.data.result.paySign,localStorage.setItem("setOrder",e.data.result.tradeNo);var a=t;wx.ready(function(){wx.chooseWXPay({timestamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success:function(t){"chooseWXPay:ok"!==t.errMsg&&"getBrandWCPayRequest:ok"!=t.errMsg||(n.Indicator.open("Loading..."),a.polling())},fail:function(t){Object(n.MessageBox)("提示","支付失败"),a.$route.query.val="",a.markmoney=!1},complete:function(t){}})})}else 1==e.data.resCode?t.$http({method:"post",url:t.httpUrl+"web/parkingPay/afterPay",data:o.a.stringify({parkingId:localStorage.getItem("parkingId"),carNumber:localStorage.getItem("carnumbar"),ticketNumber:sessionStorage.getItem("ticknumbar3")?sessionStorage.getItem("ticknumbar3"):null,mark:t.useMark?t.useMark:0,openId:localStorage.getItem("openid"),type:t.type,money:0,resId:t.tradeNo})}).then(function(e){t.markmoney=!1,Object(n.MessageBox)({title:"提示",message:"本次停车免费",closeOnClickModal:!1}).then(function(e){s()({method:"post",url:t.httpUrl+"app/reserve/selectResId",data:o.a.stringify({resId:t.$route.query.orderg})}).then(function(t){console.log(t)}),t.$router.push({path:"/homePage"})})}):2==e.data.resCode?Object(n.MessageBox)({title:"提示",message:"本次停车免费",closeOnClickModal:!1}).then(function(e){t.$router.push({path:"/homePage"}),t.markmoney=!1,sessionStorage.removeItem("ticknumbar1"),sessionStorage.removeItem("ticknumbar2"),sessionStorage.removeItem("ticknumbar3"),sessionStorage.removeItem("ticknumbar4")}):10==e.data.resCode&&Object(n.MessageBox)({title:"提示",message:e.data.result,closeOnClickModal:!1}).then(function(e){window.location.reload(),t.markmoney=!1,sessionStorage.removeItem("ticknumbar1"),sessionStorage.removeItem("ticknumbar2"),sessionStorage.removeItem("ticknumbar3"),sessionStorage.removeItem("ticknumbar4")})})},licektl:function(){var t={carNumber:localStorage.getItem("carnumbar")};console.log(t),this.$http({method:"post",url:this.httpUrl+"web/parkingPay/charging",data:o.a.stringify(t)}).then(function(t){1!=t.data.resCode&&(console.log(t),localStorage.setItem("longdate",t.data.result.longdate),localStorage.setItem("onsale_price",t.data.result.onsale_price),localStorage.setItem("paid_price",t.data.result.paid_price),localStorage.setItem("paking_lot_name",t.data.result.paking_lot_name),localStorage.setItem("price",t.data.result.price),localStorage.setItem("startdate",t.data.result.startdate),localStorage.setItem("time_out",t.data.result.time_out),localStorage.setItem("parkingId",t.data.result.parkingId),window.location.reload())})},polling:function(){var t=this;t.$http({method:"post",url:t.httpUrl+"web/parkingPay/afterPay",data:o.a.stringify({parkingId:localStorage.getItem("parkingId"),carNumber:localStorage.getItem("carnumbar"),ticketNumber:sessionStorage.getItem("ticknumbar3")?sessionStorage.getItem("ticknumbar3"):null,mark:t.useMark?t.useMark:0,type:t.type,openId:localStorage.getItem("openid"),money:t.moneys,resId:t.tradeNo})}).then(function(e){n.Indicator.close(),t.$router.replace({path:"/homePage"}),s()({method:"post",url:t.httpUrl+"app/reserve/selectResId",data:o.a.stringify({resId:t.$route.query.orderg})}).then(function(t){console.log(t)})})},getFormatDate:function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},onBridgeReady:function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:this.appId,timeStamp:this.timeStamp,nonceStr:this.nonceStr,package:this.package,signType:this.signType,paySign:this.paySign},function(t){t.err_msg})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%",background:"#fff"}},[i("div",{staticStyle:{width:"96%",margin:"0 auto","line-height":"0.8rem","text-align":"center","padding-top":"0.44rem"}},[i("p",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.e))]),t._v(" "),i("p",{staticStyle:{"font-size":"25px",color:"#f68b1c"}},[t._v(t._s(t.y>=0?t.y:0)+"元")]),t._v(" "),i("p",{staticStyle:{"font-size":"13px",color:"#999"}},[t._v("车口袋提供计时服务")])]),t._v(" "),i("div",{staticStyle:{background:"#e6e6e6",height:"0.26rem",width:"100%"}}),t._v(" "),i("ul",{staticClass:"payul"},[i("li",[i("div",{staticStyle:{}},[t._v("车牌号码")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[t._v(t._s(t.a))])]),t._v(" "),i("li",[i("div",{staticStyle:{}},[t._v("预约时间")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[t._v(t._s(t.g))])]),t._v(" "),i("li",[i("div",{staticStyle:{}},[t._v("预约时长")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[t._v(t._s(t.b))])]),t._v(" "),i("li",{staticStyle:{background:"#e6e6e6",height:"0.26rem",width:"100%","margin-left":"0"}}),t._v(" "),i("li",{staticClass:"meiyong"},[i("div",{staticStyle:{}},[t._v("应付金额")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[t._v("￥"+t._s(t.f))])]),t._v(" "),i("li",{staticClass:"meiyong",on:{click:t.tica}},[i("div",{staticStyle:{}},[t._v("优惠券")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[1==t.loack?i("span",[t._v("优惠券")]):t._e(),t._v(" "),2==t.loack?i("span",[t._v("免费时长"+t._s(t.disp)+"分钟")]):t._e(),t._v(" "),3==t.loack?i("span",[t._v("红包优惠"+t._s(t.disp)+"元")]):t._e(),t._v(" "),4==t.loack?i("span",[t._v("红包折扣"+t._s(t.disp/10)+"折")]):t._e(),t._v(" "),i("img",{staticStyle:{"vertical-align":"middle","margin-top":"-2px","margin-right":"-2px",width:"0.14rem",height:"0.24rem"},attrs:{src:a("LIqU")}})])]),t._v(" "),i("router-link",{attrs:{to:{path:"/shengcheng",query:{name:this.e}}}},[i("li",{staticClass:"meiyong"},[i("div",{staticStyle:{}},[t._v("积分")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[t.markmoney?i("span",[t._v("积分抵扣"+t._s(this.$route.query.val)+"元")]):t._e(),t._v(" "),t.markmoney?t._e():i("span"),t._v(" "),i("img",{staticStyle:{"vertical-align":"middle","margin-top":"-2px","margin-right":"-2px",width:"0.14rem",height:"0.24rem"},attrs:{src:a("LIqU")}})])])]),t._v(" "),i("li",{staticClass:"meiyong"},[i("div",{staticStyle:{}},[t._v("优惠金额")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[t._v("￥"+t._s(t.c))])]),t._v(" "),i("li",[i("div",{staticStyle:{}},[t._v("已付金额")]),t._v(" "),i("div",{staticStyle:{"margin-right":"4%"}},[t._v("￥"+t._s(t.d))])])],1),t._v(" "),i("div",{staticStyle:{width:"92%",margin:"0 auto","font-size":"14px",color:"#b9b9b9","margin-top":"0.2rem","margin-bottom":"0.07rem"}},[t._m(0),t._v(" "),t.sliky?i("span",{staticStyle:{color:"#999","font-size":"11px"}},[t._v("请尽快进场")]):i("span",{staticStyle:{color:"#999","font-size":"11px"}},[t._v("预约已超时")])]),t._v(" "),i("div",{staticClass:"paytoot",on:{click:t.rightnow}},[t._v("立即付款")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{"vertical-align":"middle",width:"0.3rem",height:"0.3rem",display:"inline-block"}},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a("dIaG"),alt:""}})])}]};var c=a("VU/8")(g,l,!1,function(t){a("Ky3B")},"data-v-4b00d62f",null);e.default=c.exports}});