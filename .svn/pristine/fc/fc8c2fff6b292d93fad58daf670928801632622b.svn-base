webpackJsonp([88],{AVWw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("woOf"),o=s.n(a),i=s("bOdI"),l=s.n(i),r=s("mw3O"),n=s.n(r),c=s("OMN4"),d=s.n(c),h={name:"equipmentList",data:function(){var e;return e={background:"",name:"",logo:"",sty:"1",personal:!1,timeDate:{day:"",time:""}},l()(e,"logo",{names:""}),l()(e,"userAlias",""),l()(e,"data",{}),l()(e,"oldPassWord",""),l()(e,"newPassWord",""),l()(e,"rNewPassWord",""),l()(e,"imageUrl",""),l()(e,"universal",{add:!1,change:!1}),l()(e,"paging",{page:1,pageSize:10,total:0}),l()(e,"tableData",[]),l()(e,"search",{roleName:""}),l()(e,"add",{roleName:"",roleDescribe:""}),l()(e,"change",{roleName:"",roleDescribe:""}),l()(e,"img1",""),l()(e,"img2",""),e},mounted:function(){document.title=this.$route.meta.title,this.searchClick();var e=this;this.userAlias=sessionStorage.getItem("userAlias"),localStorage.getItem("userId")||e.$router.push("/pageLogin"),document.getElementsByClassName("side")[0].style.height=document.body.clientHeight-170+"px",this.personal=!0,d()({method:"post",url:this.$store.state.http+"/user/selcBycompanyId",data:n.a.stringify({userId:localStorage.getItem("userId")})}).then(function(t){0==t.data.resCode&&(e.data=t.data.result,console.log(t.data.result))}),d()({method:"post",url:this.$store.state.http+"/website/findWebsite"}).then(function(t){e.logo=t.data.website.logo,e.name=t.data.website.name,e.background=t.data.website.background})},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},uploadFile:function(e){var t=new FormData;t.append("file",e);e=t;var s=this;d()({method:"post",url:this.$store.state.http+"/website/upload",data:e}).then(function(e){s.background=e.data.image_url})},changePassWord:function(){var e=this;if(this.oldPassWord.length<6)this.$message.error("旧密码有误");else if(this.newPassWord!=this.rNewPassWord)this.$message.error("两次新密码不一致");else if(this.newPassWord.length>=6&&this.newPassWord.length<=20){var t={oldpassword:this.oldPassWord,userId:localStorage.getItem("userId"),Password:this.newPassWord};d()({method:"post",url:this.$store.state.http+"/user/resetPassword",data:n.a.stringify(t)}).then(function(t){console.log(t.data),0==t.data.resCode?e.$message({message:"密码修改成功",type:"success"}):e.$message.error(t.data.errMsg)})}else this.$message.error("密码长度应在6-20位之间")},changeData:function(){var e=this,t=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");if(""==this.data.userAlias)this.$message.error("用户名不能为空");else if(/^[1][3,4,5,7,8][0-9]{9}$/.test(this.data.phoneNum))if(t.test(this.data.email)){var s={userId:localStorage.getItem("userId"),phoneNum:this.data.phoneNum,email:this.data.email,userAlias:this.data.userAlias};d()({method:"post",url:this.$store.state.http+"/user/resetPassword",data:n.a.stringify(s)}).then(function(t){console.log(t.data),0==t.data.resCode?e.$message({message:"修改成功",type:"success"}):e.$message.error(t.data.errMsg)})}else this.$message.error("邮箱格式不正确");else this.$message.error("手机号码格式有误")},beforeAvatarUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),s="jpg"===t,a="png"===t,o=e.size/1024/1024<10;return s||a||this.$message({message:"上传文件只能是 xls、xlsx格式!",type:"warning"}),o||this.$message({message:"上传文件大小不能超过 10MB!",type:"warning"}),s||a&&o},cunone:function(){var e={name:this.name,background:this.background,logo:this.logo,id:1},t=this;console.log(e),d()({method:"post",url:this.$store.state.http+"/website/add",data:n.a.stringify(e)}).then(function(e){console.log(e),0==e.data.resCode?(t.$message({message:"修改成功",type:"success"}),location.reload()):t.$message({message:"添加失败",type:"error"})})},uploadFile1:function(e){var t=new FormData;t.append("file",e);e=t;var s=this;d()({method:"post",url:this.$store.state.http+"/website/upload",data:e}).then(function(e){console.log(e),s.img2=e.data.image_url,s.logo=e.data.image_url,console.log(s.img2)})},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},addClick:function(){console.log(this.add);var e=this.add,t=this;d()({method:"post",url:this.$store.state.http+"/role/add",data:n.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.resCode?t.searchClick():t.$message({message:"添加失败",type:"error"})}),t.universal.add=!1},deleteClick:function(e){var t=this;console.log(e);var s=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d()({method:"post",url:t.$store.state.http+"/role/delete",data:n.a.stringify({roleId:e.roleId})}).then(function(e){console.log(e.data),0==e.data.resCode?s.searchClick():s.$message({message:"删除失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeShow:function(e){this.universal.change=!0,this.change=o()({},e),console.log(e)},hideclick:function(){this.universal.change=!1},changeClick:function(){console.log(this.change);var e=this.change,t=this;d()({method:"post",url:this.$store.state.http+"/role/update",data:n.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.resCode?(t.$message({message:"修改成功",type:"success"}),t.searchClick()):(t.searchClick(),t.$message({message:"修改失败",type:"error"}))}),t.universal.change=!1},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize};this.search.roleName&&(e.roleName=this.search.roleName),this.search.positioneStart&&(e.positioneStart=this.search.positioneStart),this.search.positionereEnd&&(e.positionereEnd=this.search.positionereEnd),console.log(e);var t=this;t.tableData=[],d()({method:"post",url:this.$store.state.http+"/role/findAll",data:n.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.resCode?(t.paging.total=e.data.count,t.tableData=e.data.result):t.tableData=[]})}}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"addRole"}},[e._m(0),e._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"select"},[s("span",[e._v("网站名称：")]),s("br"),s("br"),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),s("div",{staticClass:"logo"},[e._v("网站logo：")]),s("br"),e._v(" "),s("div",{staticStyle:{width:"180px",border:"1px solid #CCCCCC","margin-left":"5px",height:"70px"}},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.logo}})]),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{action:"",name:"file",limit:1,"before-upload":e.uploadFile1,"list-type":"picture"}},[s("br"),e._v(" "),s("el-button",{staticClass:"loadup",attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[s("span",{staticClass:"aKey"},[e._v("*")]),e._v("只能上传jpg/png文件，规定图片尺寸：180*70")])],1),e._v(" "),s("span",[e._v("网站背景：")]),s("br"),s("br"),e._v(" "),s("div",{staticStyle:{width:"200px",border:"1px solid #CCCCCC","margin-left":"5px",height:"112px"}},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.background}})]),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{action:"",name:"file",limit:1,"before-upload":e.uploadFile,"list-type":"picture"}},[s("br"),e._v(" "),s("el-button",{staticClass:"loadup",attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[s("span",{staticClass:"aKey"},[e._v("*")]),e._v("只能上传jpg/png文件，规定图片尺寸：1920*1080")])],1)],1),e._v(" "),s("el-button",{staticClass:"oyButton cun",attrs:{type:"success"},on:{click:e.cunone}},[e._v("保存")])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",[s("div",{staticClass:"oYspan",class:2==e.sty?"styles":"",on:{click:function(t){e.sty=2}}},[e._v("修改资料")]),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("   用户名：")]),e._v(" "),s("el-input",{staticClass:"oYinp",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.data.userAlias,callback:function(t){e.$set(e.data,"userAlias",t)},expression:"data.userAlias"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("绑定手机：")]),e._v(" "),s("el-input",{staticClass:"oYinp",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.data.phoneNum,callback:function(t){e.$set(e.data,"phoneNum",t)},expression:"data.phoneNum"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("绑定邮箱：")]),e._v(" "),s("el-input",{staticClass:"oYinp",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}})],1),e._v(" "),s("el-button",{staticClass:"oyButton cun cunthree",attrs:{type:"success"},on:{click:e.changeData}},[e._v("保存")])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",[s("div",{staticClass:"oYspan",class:3==e.sty?"styles":"",on:{click:function(t){e.sty=3}}},[e._v("修改密码")]),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("   旧密码：")]),e._v(" "),s("el-input",{staticClass:"oYinp",attrs:{type:"password",clearable:"",placeholder:"请输入内容"},model:{value:e.oldPassWord,callback:function(t){e.oldPassWord=t},expression:"oldPassWord"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("   新密码：")]),e._v(" "),s("el-input",{staticClass:"oYinp",attrs:{type:"password",clearable:"",placeholder:"请输入内容"},model:{value:e.newPassWord,callback:function(t){e.newPassWord=t},expression:"newPassWord"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("重复密码：")]),e._v(" "),s("el-input",{staticClass:"oYinp",attrs:{type:"password",clearable:"",placeholder:"请输入内容"},model:{value:e.rNewPassWord,callback:function(t){e.rNewPassWord=t},expression:"rNewPassWord"}})],1),e._v(" "),s("el-button",{staticClass:"oyButton cun cuntwo",attrs:{type:"success"},on:{click:e.changePassWord}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("修改信息")])])])}]};var u=s("VU/8")(h,p,!1,function(e){s("VqTt")},"data-v-13692900",null);t.default=u.exports},VqTt:function(e,t){}});