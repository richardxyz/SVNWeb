webpackJsonp([11],{uerE:function(e,t,a){e.exports=a.p+"staticyuyue/img/swith_3.4df340a.png"},wXF9:function(e,t){},"z/E+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mw3O"),n=a.n(s),r=a("Au9i"),o=a("UMo0"),i=a("mtWM"),c=a.n(i),l={name:"return",data:function(){return{name:"",address:"",id:"",righ:"",car:"",statePH:null,sm:"",lk:"",parameter:1}},beforeRouteLeave:function(e,t,a){"pay"==e.name&&"return"==t.name?a({path:"/homePage"}):"payyuyue"==e.name&&"return"==t.name?a({path:"/homePage"}):a()},mounted:function(){this.name=localStorage.getItem("addres"),this.address=localStorage.getItem("name"),this.id=localStorage.getItem("devid"),this.car=localStorage.getItem("carnumbar"),this.righ=localStorage.getItem("startdate");var e={devId:this.id,datastreamIds:"3001,4002,4003"},t=this;window.addEventListener("popstate",function(e){t.$router.push("/homePage")},!1),Object(o.x)(e).then(function(e){if(3==JSON.parse(e.data.errMsg.substring(6,e.data.errMsg.length)).errno)Object(r.MessageBox)("提示","车位锁故障");else{for(var a=e.data.errMsg.data.devices[0].datastreams,s="",n="",o=0;o<a.length;o++)switch(a[o].id){case"3001":t.statePH=a[o].value;break;case"4002":s=a[o].value;break;case"4003":n=a[o].value}console.log(t.statePH),console.log(s),console.log(n),t.sm=n<15?"差":n>=15&&n<25?"良好":"优",t.lk=3==s?"上方无物体":2==s?"上方有物体":"超声波故障"}})},methods:{go:function(){var e=this;r.MessageBox.confirm("",{message:"是否升起车位锁",confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1}).then(function(t){if("confirm"==t)if(console.log(e.statePH),0==e.statePH)Object(r.MessageBox)({title:"提示",message:"车位锁处于升起状态，请驶离",closeOnClickModal:!1}).then(function(t){e.$router.push("/homePage")});else{r.Indicator.open({text:"Loading...",spinnerType:"加载中"});var a={devId:e.id,cmd:18,cmdValue:"11",resId:localStorage.getItem("setOrder"),address:e.address,carNumber:localStorage.getItem("carnumbar"),startTime:localStorage.getItem("startTime"),dateTime:Object(o.y)(),name:localStorage.getItem("nickname"),phone:localStorage.getItem("phone")};c()({method:"post",url:e.nowhttpUrl+"/parkingData/queryGetDate",data:n.a.stringify(a)}).then(function(t){if(console.log(t),10==t.data.resCode)r.Indicator.close(),Object(r.MessageBox)("提示","设备离线");else if(0==t.data.resCode)var a=e,s=setInterval(function(){var e={devId:a.id};console.log(e),c()({method:"post",url:this.nowhttpUrl+"/parkingData/getBatData",data:n.a.stringify(e)}).then(function(e){console.log(e),a.parameter+=1;for(var t=e.data.errMsg.data.devices[0].datastreams,n="",o=0;o<t.length;o++)switch(t[o].id){case"3001":n=t[o].value}console.log(n),0==n?(r.Indicator.close(),Object(r.MessageBox)({title:"提示",message:"升起完成",closeOnClickModal:!1}).then(function(e){a.$router.push("/homePage")}),clearInterval(s)):a.parameter>=30&&(console.log(a.parameter),r.Indicator.close(),Object(r.MessageBox)({title:"提示",message:"操作失败，请重新操作",closeOnClickModal:!1}).then(function(e){a.$router.push("/return")}),clearInterval(s))})},1e3);else 3==t.data.resCode&&(r.Indicator.close(),Object(r.MessageBox)("提示","设备未入库"))})}})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{attrs:{id:"index-center"}},[a("div",{staticClass:"index-top-upState"},[e._v(e._s(e.lk))]),e._v(" "),a("div",{staticClass:"index-center-top"},[a("div",{staticClass:"index-top-span"},[e._v(e._s(e.address)+"-"+e._s(e.id)+"车位")]),e._v(" "),a("div",{staticStyle:{"text-align":"center","padding-top":"1rem",color:"#fff"}},[e._v("车牌号码："+e._s(e.car))]),e._v(" "),a("p",[e._v("电量过低")])]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"index-center-bottom"},[a("div",{staticClass:"index-center-bottom-f"},[a("div",{staticClass:"index-center-bottom-s"}),e._v(" "),a("div",[e._v("信号强度：\n          "),a("span",{staticClass:"signal"},[e._v(e._s(e.sm))])]),e._v(" "),a("div",{staticClass:"index-center-bottom-n"})])])]),e._v(" "),a("div",{staticStyle:{"font-size":"15px","text-align":"center",width:"80%",height:"0.8rem",background:"#fb851c",margin:"0.5rem auto","border-radius":"5px","line-height":"0.8rem",color:"#fff"},on:{click:e.go}},[e._v("升起")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"index-center-center"},[t("img",{staticClass:"index-switch",attrs:{src:a("uerE")}})])}]};var g=a("VU/8")(l,d,!1,function(e){a("wXF9")},"data-v-9be72712",null);t.default=g.exports}});