webpackJsonp([47],{D9hO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),i=a.n(s),l=a("mw3O"),n=a.n(l),o=a("OMN4"),r=a.n(o),c=(a("NYxO"),a("UMo0")),d=(a("KDrK"),a("qKYu"),a("2UA+"),{name:"storeList",data:function(){return{id:"",name:"",paging:{page:1,pageSize:10,total:0},tableData:[],addB:{allTimes:"",model:""},shopList:[],menu:[],menulist:{cid:"04",cname:"标准快洗",money:"0",sid:19,sold:0},menulist1:{cid:"05",cname:"4S专用",money:"0",sid:19,sold:0},universal:{add:!1,exit:!1}}},mounted:function(){this.$route.query.id&&(this.id=this.$route.query.id),this.$route.query.name&&(this.name=this.$route.query.name),this.getWashType(),this.searchClick()},computed:{},methods:{getWashType:function(){var e=this;r()({method:"post",url:this.$store.state.wash_test_url+"/carwash/querylistByCarwash",data:n.a.stringify({page:1,pageSize:100})}).then(function(t){if(console.log(t),200==t.status){e.menu=t.data.result;for(var a=0;a<t.data.result.length;a++)"水蜡快洗"==e.menu[a].cname?e.menu[a].cid=1:"打蜡晶洗"==e.menu[a].cname&&(e.menu[a].cid=2),e.menu[a].cid="0"+t.data.result[a].cid;e.menu.push(e.menulist),e.menu.push(e.menulist1),console.log(e.menu)}})},AddShow:function(){this.universal.add=!0,this.clear()},changeShow:function(e){console.log(e),this.universal.add=!0,this.universal.exit=!0,i()(this.addB,e)},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.paging.page=e,this.searchClick()},addClick:function(){var e=this;if(""==e.addB.model||""==e.addB.allTimes)return e.$message.error("带*的数据不能为空哦！"),!1;/^([0-9]*[1-9][0-9]*(.[0-9]+)?|[0]+.[0-9]*[1-9][0-9]*)$/.test(e.addB.allTimes)||e.$message.error("总次数要为大于0的数字值哦！"),e.addB.allTimes=Number(e.addB.allTimes),e.addB.cseId=Number(e.id),console.log(e.addB),Object(c.o)(e.addB).then(function(t){console.log(t),0==t.data.resCode?(e.$message({message:"添加成功",type:"success"}),e.universal.add=!1,e.searchClick()):e.$message({message:t.data.result,type:"error"})})},exitClick:function(){var e=this;if(""==e.addB.model||""==e.addB.allTimes)return e.$message.error("带*的数据不能为空哦！"),!1;console.log(e.addB),/^([0-9]*[1-9][0-9]*(.[0-9]+)?|[0]+.[0-9]*[1-9][0-9]*)$/.test(e.addB.allTimes)||e.$message.error("总次数要为大于0的数字值哦！");var t={id:e.addB.id,model:e.addB.model,allTimes:e.addB.allTimes,cseId:e.id};Object(c._4)(t).then(function(t){console.log(t),0==t.data.resCode?(e.$message({message:"修改成功",type:"success"}),e.universal.add=!1,e.universal.exit=!1,e.searchClick()):e.$message({message:t.data.result,type:"error"})})},deleteClick:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.Q)({id:e.id}).then(function(e){console.log(e),0==e.data.resCode?(a.searchClick(),a.$message({message:"删除成功",type:"success"})):a.$message({message:"删除失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},searchClick:function(){var e={cseId:this.id},t=this;t.tableData=[],Object(c._29)(e).then(function(e){e.data.count>0?(t.paging.total=e.data.count,t.tableData=e.data.result):(t.tableData=[],t.paging.total=0)})},operation:function(e){console.log(e),this.$router.push({path:"/pageHome/storeStaffWash",query:{id:e.id,name:e.name}})},seeClick:function(e){this.universal.look=!0,i()(this.look,e)},clear:function(){this.addB.model="",this.addB.allTimes=""},chosewashtype:function(e){return this.menu.forEach(function(t,a){t.cid==e&&(e=t.cname)}),e}}}),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"faultList"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"headerTitle"},[a("span",[e._v(e._s(e.name)+"员工洗车模式管理")]),e._v(" "),""!=e.id?a("el-button",{staticClass:"oyButton back",staticStyle:{float:"right"},attrs:{type:"success"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.AddShow}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e.name))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e.name))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"洗车模式",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e.chosewashtype(t.row.model)))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e.chosewashtype(t.row.model)))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总次数",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.allTimes)+"次")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.allTimes)+"次")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"剩余次数",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.onlyTimes)+"次")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.onlyTimes)+"次")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[a("i",{staticClass:"icon-change el-icon-edit",on:{click:function(a){e.changeShow(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteClick(t.row)}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.universal.exit?"修改":"添加",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("洗车模式：\n          ")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changetype},model:{value:e.addB.model,callback:function(t){e.$set(e.addB,"model",t)},expression:"addB.model"}},e._l(e.menu,function(e){return a("el-option",{key:e.cid,attrs:{label:e.cname,value:e.cid}})}))],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("总次数：\n          ")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入数量"},model:{value:e.addB.allTimes,callback:function(t){e.$set(e.addB,"allTimes",t)},expression:"addB.allTimes"}}),e._v(" "),a("br"),e._v(" "),a("br")],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),e.universal.exit?a("el-button",{staticClass:"oyButton",staticStyle:{"margin-top":"12px"},attrs:{type:"success"},on:{click:e.exitClick}},[e._v("保存")]):a("el-button",{staticClass:"oyButton",staticStyle:{"margin-top":"12px"},attrs:{type:"success"},on:{click:e.addClick}},[e._v("保存")])],1)]),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,15,20],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("Fl85")},"data-v-74a14d6e",null);t.default=p.exports},Fl85:function(e,t){}});