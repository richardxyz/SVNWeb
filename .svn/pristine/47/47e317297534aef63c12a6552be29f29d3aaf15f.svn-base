webpackJsonp([16],{TxPR:function(e,t){},pjeT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mtWM"),o=a.n(r),n=a("mw3O"),i=a.n(n),s=a("Au9i"),c=a("UMo0"),l={data:function(){return{List:[],laddcar:!0,options:[{label:"预约订单",value:"1"},{label:"进场订单",value:"2"}],first:"",valueChoose:"1",backgool:!1,repcarnumber:"",conrler:"",carnumber_hie:!0}},watch:{},beforeRouteLeave:function(e,t,a){"login"==e.name&&"list"==t.name?a({path:"/list"}):a()},mounted:function(){var e=this;window.addEventListener("popstate",this.backage,!1);var t={openid:this.openid};console.log(t),Object(c.q)(t).then(function(t){console.log(t),200==t.data.resCode&&(0==t.data.result.length?e.$router.push({path:"/card",query:{arr:7}}):(e.List=t.data.result,2==e.List.length?e.carnumber_hie=!1:e.carnumber_hie=!0))})},destroyed:function(){window.removeEventListener("popstate",this.backage,!1)},methods:{backage:function(e){s.MessageBox.confirm("",{message:"是否退出微信公众号",title:"提示",confirmButtonText:"确认",cancelButtonText:"取消",closeOnClickModal:!1}).then(function(e){"confirm"==e?window.WeixinJSBridge.call("closeWindow"):window.location.reload()})},pushHistory:function(){window.history.pushState({title:"title",url:"#"},"title","#/list")},checkeds:function(e){sessionStorage.removeItem("ticknumbar1"),sessionStorage.removeItem("ticknumbar2"),sessionStorage.removeItem("ticknumbar3"),console.log(this.valueChoose),2==e?this.pmoney():1==e&&this.licektl()},licektl:function(){var e=this,t={carNumber:this.repcarnumber};console.log(t),this.$http({method:"post",url:this.oldurl+"/web/parkingPay/charging",data:i.a.stringify(t)}).then(function(t){1!=t.data.resCode?(console.log(t),localStorage.setItem("carnumber",t.data.result.carnumber),localStorage.setItem("longdate",t.data.result.longdate),localStorage.setItem("onsale_price",t.data.result.onsale_price),localStorage.setItem("paid_price",t.data.result.paid_price),localStorage.setItem("paking_lot_name",t.data.result.paking_lot_name),localStorage.setItem("price",t.data.result.price),localStorage.setItem("startdate",t.data.result.startdate),localStorage.setItem("time_out",t.data.result.time_out),localStorage.setItem("parkingId",t.data.result.parkingId),localStorage.setItem("parkingIds",t.data.result.parkingIds),localStorage.setItem("HPrice",t.data.result.HPrice),"0.00"==t.data.result.price?s.MessageBox.confirm("",{message:"您在免费时长内,您未驶入停车场,是否取消订单？",title:"提示",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){if("confirm"==a){var r={openid:e.openid,resId:t.data.result.tradeNo,parkId:t.data.result.parkingId,devId:t.data.result.devid};Object(c.p)(r).then(function(e){e.data.resCode})}}):e.$router.push({path:"/payyuyue",query:{vals:t.data.result,orderg:e.$route.query.orderid}})):Object(s.MessageBox)("提示","暂无订单信息")})},delet:function(e,t){var a=this;console.log(e),this.List.forEach(function(t){t.brandid!=e&&(console.log(t.brandid),a.conrler=t.brandid)}),s.MessageBox.confirm("",{message:"确认要删除车牌号么？",title:"提示",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){if("confirm"==t){console.log(e);var r={brandid:e,id:a.conrler?a.conrler:1};Object(c.h)(r).then(function(e){console.log(e),200==e.data.resCode?window.location.reload():s.MessageBox.confirm("默认车牌不能删除","提示")})}})},addnuma:function(){this.$router.push({path:"/card",query:{arr:7}})},rightrecord:function(){this.$router.push({path:"/record"})},conceal:function(){this.backgool=!this.backgool},paymoney:function(e){var t=this;this.repcarnumber=e,Object(c.g)({car_number:e}).then(function(a){4==a.data.resCode?s.MessageBox.confirm("",{message:"请确认"+t.repcarnumber+"是否为您的车牌？",title:"提示",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){if("confirm"==e){var r={errorCarNumber:a.data.result.carNumber,correctCarNumber:t.repcarnumber};Object(c.e)(r).then(function(e){0==e.data.resCode&&Object(s.MessageBox)("提示","更换成功")})}}):o()({method:"post",url:t.httpUrl+"/api/checkCarNumberIsOrdered",data:i.a.stringify({carNumber:e})}).then(function(e){2==e.data.resCode?t.licektl():1==e.data.resCode||3==e.data.resCode?t.pmoney():4==e.data.resCode?t.backgool=!0:t.pmoney()})})},pmoney:function(){var e=this,t={car_number:this.repcarnumber};console.log(this.repcarnumber),Object(c.g)(t).then(function(t){1==t.data.resCode||2==t.data.resCode?(console.log(t),localStorage.setItem("carnumber",t.data.carnumber),localStorage.setItem("longdate",t.data.longdate),localStorage.setItem("onsale_price",t.data.onsale_price),localStorage.setItem("paid_price",t.data.paid_price),localStorage.setItem("paking_lot_name",t.data.paking_lot_name),localStorage.setItem("price",t.data.price),localStorage.setItem("startdate",t.data.startdate),localStorage.setItem("time_out",t.data.time_out),localStorage.setItem("img",t.data.img),localStorage.setItem("parkingId",t.data.parkingId),localStorage.setItem("HPrice",t.data.HPrice),0==t.data.price?Object(s.MessageBox)("提示","本次停车在免费内！"):e.$router.push({path:"/pay",query:{vals:t.data}})):0==t.data.resCode||-1==t.data.resCode?Object(s.MessageBox)("提示",t.data.result):-2==t.data.resCode?Object(s.MessageBox)("提示",t.data.result):3==t.data.resCode?e.$router.push({path:"/vipcard",query:{carnumber:e.repcarnumber}}):4==t.data.resCode&&s.MessageBox.confirm("",{message:"请确认"+e.repcarnumber+"是否为您的车牌？",title:"提示",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){if("confirm"==a){var r={errorCarNumber:t.data.result.carNumber,correctCarNumber:e.repcarnumber};Object(c.e)(r).then(function(e){0==e.data.resCode&&Object(s.MessageBox)("提示","更换成功")})}})})}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{background:"#efefef"}},[e._m(0),e._v(" "),r("section",{staticStyle:{height:"100%"}},[r("ul",{staticStyle:{height:"100%",width:"100%"}},e._l(e.List,function(t){return r("li",{staticClass:"listli"},[r("div",{staticClass:"firs"},[r("div",{staticStyle:{color:"#999"}},[1==t.priority?r("span",[e._v("默认")]):e._e(),e._v("车牌号")]),e._v(" "),r("div",{on:{click:function(a){e.delet(t.brandid,t)}}},[r("img",{staticStyle:{width:"0.15rem",height:"0.15rem"},attrs:{src:a("JzIT"),alt:""}})])]),e._v(" "),r("div",{staticStyle:{width:"93%",margin:"0 auto","margin-top":"0.1rem","margin-bottom":"0.1rem"}},[r("p",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.brandname))])]),e._v(" "),e._m(1,!0),e._v(" "),r("div",{staticClass:"firs bottomfir"},[7==t.brandname.length?r("div",{staticStyle:{"font-size":"16px"}},[e._v("普通车牌")]):e._e(),e._v(" "),8==t.brandname.length?r("div",{staticStyle:{"font-size":"16px"}},[e._v("新能源车牌")]):e._e(),e._v(" "),r("div",{staticClass:"pari",on:{click:function(a){e.paymoney(t.brandname)}}},[e._v("停车缴费")])])])}))]),e._v(" "),e.carnumber_hie?r("div",[e.laddcar?r("div",{staticClass:"paytoot nicenew",on:{click:e.addnuma}},[e._v("新增车牌号")]):e._e(),e._v(" "),e.laddcar?e._e():r("div",{staticClass:"paytoot nicenew"},[e._v("新增车牌号")])]):e._e(),e._v(" "),r("div",{staticClass:"paytoot",on:{click:e.rightrecord}},[e._v("停车记录")]),e._v(" "),e.backgool?r("footer",{on:{click:e.conceal}},[r("div",[r("p",[e._v("选择支付订单")]),e._v(" "),r("ul",e._l(e.options,function(t){return r("li",{on:{click:function(a){e.checkeds(t.value)}}},[e._v(e._s(t.label))])}))])]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",{staticStyle:{"font-size":"18px",width:"94%",margin:"0 auto","padding-top":"0.2rem","margin-bottom":"0.2rem"}},[t("h2",{staticStyle:{"font-size":"0.25rem","font-weight":"600"}},[this._v("我的车牌")]),this._v(" "),t("p",{staticStyle:{"margin-top":"0.2rem","font-size":"0.15rem","line-height":"0.25rem","font-family":"'PingFang-SC-Regular'"}},[this._v("亲爱的会员，您可添加您的爱车车牌，获得停车信息查询和快速缴费服务。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"93%",margin:"0 auto","margin-bottom":"0.1rem"}},[t("p",{staticStyle:{color:"#999"}},[this._v("车牌类型")])])}]};var u=a("VU/8")(l,d,!1,function(e){a("TxPR")},"data-v-6e715c27",null);t.default=u.exports}});