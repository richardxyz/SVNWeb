webpackJsonp([15],{"3QVA":function(t,e){},"8tQY":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("mw3O"),o=a.n(i),c=a("mtWM"),r=a.n(c),d=a("UMo0"),l=(a("9gAg"),a("NYxO")),u=a("Au9i"),g={name:"detail",data:function(){return{olsei:"",show:!0,tac:[],appId:"",timeStamp:"",Obj:{},nonceStr:"",package:"",signType:"",paySign:""}},watch:{},methods:s()({},Object(l.c)(["USEOBJ"]),{format:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1,s=e.getDate(),i=e.getHours(),o=e.getMinutes(),c=e.getSeconds();return a+"-"+this.add0(n)+"-"+this.add0(s)+" "+this.add0(i)+":"+this.add0(o)+":"+this.add0(c)},add0:function(t){return t<10?"0"+t:t},details:function(t){var e=this;Object(d.i)({number:t}).then(function(t){200==t.status&&(e.$router.push({path:"/order"}),e.USEOBJ(t.data.result)),console.log(t)})},monelis:function(t){var e={number:t};Object(d.e)(e).then(function(t){console.log(t),0==t.data.resCode&&Object(u.MessageBox)({title:"提示",message:"取消成功",closeOnClickModal:!1}).then(function(t){window.location.reload()})})},pay:function(t){console.log(t),this.Obj=t;var e={money:t.money,weiTrade:t.number,openId:t.openid,ip:returnCitySN.cip};console.log(e);var a=this;r()({method:"post",url:a.httpUrl+"Winxins/querySate",data:o.a.stringify(e)}).then(function(e){console.log(e),"OK"==e.data.resCode&&(a.appId=e.data.appId,a.timeStamp=e.data.timeStamp,a.nonceStr=e.data.nonceStr,a.package=e.data.package,a.signType=e.data.signType,a.paySign=e.data.paySign,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",onBridgeReady)):a.onBridgeReady(t))})},onBridgeReady:function(){var t=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(e){alert(e.err_msg),"get_brand_wcpay_request:ok"==e.err_msg&&t.$http({method:"post",url:t.httpUrl+"users/queryByState",data:o.a.stringify({paystatus:e.err_msg,paytime:t.Obj.starTime,carnumber:t.Obj.country,jixing:t.Obj.cname,number:t.Obj.number,openId:localStorage.getItem("openid"),money:t.Obj.money})}).then(function(e){t.$router.push({path:"/home"})})})},abc:function(t){console.log(t);var e=this;console.log(window.location.href.split("#")[0]),this.$http.get("http://39.104.99.181:8797/scan/getJSSDKTicket?url="+window.location.href.split("#")[0]).then(function(a){wx.config({debug:!1,appId:a.data.appid,timestamp:a.data.timestamp,nonceStr:a.data.nonceStr,signature:a.data.signature,jsApiList:[a.data.jsApiList]}),wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(a){var n=a.resultStr,s=n.substring(n.indexOf("state=")+6,n.indexOf("#"));u.Indicator.open("Loading...");var i={number:t,deviceId:s};Object(d.p)(i).then(function(t){console.log(t),"0"==t.data.resCode?(u.Indicator.close(),Object(u.MessageBox)({title:"提示",message:"开柜成功",closeOnClickModal:!1}).then(function(t){return[e.$router.push("/home")]})):(u.Indicator.close(),Object(u.MessageBox)({title:"提示",message:"柜子已满",closeOnClickModal:!1}).then(function(t){return[e.$router.push("/home")]}))})}})})})}}),mounted:function(){document.title=this.$route.meta.title;var t={openid:localStorage.getItem("openid"),Page:1,PageSize:1e4};console.log(t);var e=this;Object(d.h)(t).then(function(t){console.log(t),200==t.status&&(e.tac=t.data.result)})}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box",staticStyle:{background:"#efefef"}},[a("ul",{staticClass:"lpcile",staticStyle:{"padding-top":"0.2rem",background:"#efefef"}},t._l(t.tac,function(e){return 0!=t.tac.length?a("li",[a("div",{staticClass:"tan"},[a("span",[t._v("订单编号："+t._s(e.number))]),t._v(" "),a("span",[t._v(t._s(e.starTime))])]),t._v(" "),a("p",{staticClass:"rolo"}),t._v(" "),a("div",{staticClass:"tan",on:{click:function(a){t.details(e.number)}}},[a("span",[t._v(t._s(e.cname))]),t._v(" "),a("span",[t._v(t._s(e.country))])]),t._v(" "),a("div",{staticClass:"tan",on:{click:function(a){t.details(e.number)}}},[a("span",[t._v("￥"+t._s(e.money))]),t._v(" "),"0"==e.state?a("span",{class:{active:"0"==e.state}},[t._v(t._s(t._f("Chose")(e.state)))]):t._e(),t._v(" "),"1"==e.state?a("span",{class:{actives:"1"==e.state}},[t._v(t._s(t._f("Chose")(e.state)))]):t._e(),t._v(" "),"2"==e.state?a("span",{class:{actives:"2"==e.state}},[t._v(t._s(t._f("Chose")(e.state)))]):t._e(),t._v(" "),"3"==e.state?a("span",{class:{actives:"3"==e.state}},[t._v(t._s(t._f("Chose")(e.state)))]):t._e(),t._v(" "),"4"==e.state?a("span",{class:{actives:"4"==e.state}},[t._v(t._s(t._f("Chose")(e.state)))]):t._e(),t._v(" "),"7"==e.state?a("span",{class:{actives:"7"==e.state}},[t._v(t._s(t._f("Chose")(e.state)))]):t._e()]),t._v(" "),a("p",{staticClass:"rolo"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"tans"},["1"==e.state?a("div",{staticStyle:{color:"#fff",background:"rgb(255,168,0)"},on:{click:function(a){t.abc(e.number)}}},[t._v("存钥匙")]):t._e(),t._v(" "),"2"==e.state?a("div",{staticStyle:{color:"#fff",background:"rgb(255,168,0)"},on:{click:function(t){}}},[t._v("待洗车")]):t._e(),t._v(" "),"3"==e.state?a("div",{staticStyle:{color:"#fff",background:"rgb(255,168,0)"},on:{click:function(t){}}},[t._v("洗车中")]):t._e(),t._v(" "),"4"==e.state?a("div",{staticStyle:{color:"#fff",background:"rgb(255,168,0)"},on:{click:function(a){t.pay(e)}}},[t._v("支付")]):t._e(),t._v(" "),"5"==e.state?a("div",{staticStyle:{color:"#fff",background:"rgb(255,168,0)"}},[t._v("带取件")]):t._e(),t._v(" "),"6"==e.state?a("div",{staticStyle:{color:"#fff",background:"rgb(255,168,0)"}},[t._v("已完成")]):t._e(),t._v(" "),"7"==e.state?a("div",{staticStyle:{color:"#fff",background:"rgb(108,108,108)"}},[t._v("订单已取消")]):t._e(),t._v(" "),"1"==e.state||"2"==e.state?a("div",{staticStyle:{color:"rgb(247,92,76)",border:"1px solid rgb(247,92,76)"},on:{click:function(a){t.monelis(e.number)}}},[t._v("取消订单")]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}]},[a("div",[t._v("删除订单")])])]):t._e()})),t._v(" "),0==t.tac.length?a("div",{staticStyle:{width:"100%","margin-top":"2rem"}},[t._m(0),a("p",{staticStyle:{color:"#787878","text-align":"center",padding:"10px 0"}},[t._v("暂无记录")]),t._v(" "),a("p")]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{width:"2.24rem",height:"1.4rem",margin:"0 auto"}},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a("x38g"),alt:""}})])}]};var v=a("VU/8")(g,p,!1,function(t){a("3QVA")},"data-v-7c99e9d8",null);e.default=v.exports}});