webpackJsonp([78],{"62XJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),l=a.n(s),o=a("bOdI"),n=a.n(o),i=a("mw3O"),c=a.n(i),r=a("OMN4"),d=a.n(r),v={name:"equipmentList",data:function(){var e;return e={listLoading:!1,levelList:[],level:"0",add:{deviceId:"",devicename:"",allot:""},added:"",send:{deviceId:"",title:"",timeOut:"",qos:""},change:{title:"",desc:"",tags:"",lon:"",lat:"",authInfo:"",deviceId:""},status:"",universal:{add:!1,change:!1,look:!1,send:!1},tableData:[],con:{id:"",protocol:"",create_time:"",auth_info:"",title:"",desc:"",tags:"",lon:"",lat:"",dataid:"",unit:"",unit_symbol:""},li:[]},n()(e,"add",!1),n()(e,"topic",!1),n()(e,"conGroup",!1),n()(e,"change",!1),n()(e,"send",!1),n()(e,"see",!1),n()(e,"changeGroups",!1),n()(e,"changeGrouping",{changeGrouping:"",conId:""}),n()(e,"step",0),n()(e,"seeStep",1),n()(e,"paging",{page:1,pageSize:10,total:0}),n()(e,"search",{deviceId:"",title:"",start:"",end:""}),n()(e,"controNameL",[{label:"C1",value:1},{label:"C2",value:2},{label:"C3",value:3},{label:"B1",value:4},{label:"B2",value:5},{label:"A1",value:6},{label:"A2",value:7},{label:"A3",value:8}]),e},mounted:function(){this.searchClick(),document.title=this.$route.meta.title,"123"==sessionStorage.getItem("dealer")&&(this.added=1)},methods:{ShowHide:function(){this.universal.add=!0},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,console.log(this.paging.pageSize)},next:function(){var e=this;0==this.step?d()({method:"post",url:e.$store.state.http+"/concode/conByCarBrand",data:c.a.stringify({conLocaid:e.addTo.list.conLocaid,carBrand:e.addTo.list.carBrand})}).then(function(t){if(console.log(t.data),0!=t.data.resCode)return e.$message.error("此定位器ID不存在"),e.addTo.list.conLocaid="",!1;console.log(t.data.result),e.step++>3&&(e.step=0,e.add=!1)}):e.step++>3&&(e.step=0,e.add=!1)},nextSee:function(){this.seeStep++>1&&(this.seeStep=1)},handleCurrentChange:function(e){this.searchClick()},addClick:function(){if(""==this.add.deviceId)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add.deviceName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add.allot)return this.$message.error("带*的数据不能为空哦！"),!1;var e=this,t=this.add;t.personnel=sessionStorage.getItem("dealer"),console.log(t),d()({method:"post",dataType:"jsonp",url:this.$store.state.http+"/deviceCode/addCode",data:c.a.stringify(t)}).then(function(t){console.log(t),console.log(t.data.errMsg.split(":")[1]),localStorage.setItem("id",t.data.errMsg.split(":")[1]),0==t.data.resCode?(e.searchClick(),e.$message({message:"添加成功",type:"success"})):6==t.data.resCode&&e.$alert(t.data.result,"请勿重复添加",{confirmButtonText:"确定"})}),e.universal.add=!1},deleteClick:function(e){var t=this;console.log(e);var a=this;this.$confirm("此操作将解绑IC卡, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),a.listLoading=!0,d()({method:"post",url:t.$store.state.http+"/deviceCode/delete",data:c.a.stringify({conCode:e.conCode})}).then(function(e){console.log(e),0==e.data.resCode||a.$alert(e.data.result,"系统确认框",{confirmButtonText:"确定"})});var s={devId:e.deviceId,cmd:23,cmdValue:"12"+e.deviceId};console.log(s),d()({method:"post",url:a.$store.state.http+"/send/sendCmd",data:c.a.stringify(s)}).then(function(e){if(0==e.data.resCode){console.log(e),console.log(678);var t=setTimeout(function(){var s={cmdsId:e.data.cmd_uuid};d()({method:"post",url:a.$store.state.http+"/send/QueryCmdsResp",data:c.a.stringify(s)}).then(function(e){console.log(e),0==e.data.resCode?(a.listLoading=!1,a.$message({message:"解绑成功",type:"success"}),a.searchClick(),clearTimeout(t)):(a.listLoading=!1,clearTimeout(t),a.$message({message:"解绑失败",type:"error"}))})},4e3)}else 10==e.data.resCode&&(a.listLoading=!1,a.$message({message:"解绑失败",type:"error"}))})})},changeshow:function(e){},order:function(e){this.universal.send=!0,this.send=e},searchClick:function(){var e={};(e="SURIOT"==localStorage.getItem("userId")?{page:this.paging.page,pageSize:this.paging.pageSize,userType:localStorage.getItem("userType"),dealerCode:localStorage.getItem("dealerId")}:{page:this.paging.page,pageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),userType:localStorage.getItem("userType"),dealerCode:localStorage.getItem("dealerId")}).deviceType=this.search.deviceType,e.dealer=this.search.dealer,e.dealer=sessionStorage.getItem("dealer");var t=this;console.log(e),t.tableData=[],t.timeCrea=[],console.log(t.tableData),d()({method:"post",url:this.$store.state.http+"/deviceCode/list",data:c.a.stringify(e)}).then(function(e){if(console.log(e),0==e.data.resCode){console.log(e.data.results);for(var a=0;a<e.data.results.length;a++)e.data.results[a].devDate=(s=l()(e.data.results[a].devDate.time).slice(0,10),o=void 0,void 0,void 0,void 0,void 0,void 0,void 0,o=new Date(1e3*s),n=o.getFullYear(),i=o.getMonth()+1,c=o.getDate(),r=o.getHours(),d=o.getMinutes(),v=o.getSeconds(),n+"-"+i+"-"+c+" "+r+":"+d+":"+v);t.tableData=e.data.results,t.paging.total=e.data.count}else t.tableData=[],t.paging.total=0;var s,o,n,i,c,r,d,v})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"PSTlist"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("控制器编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.deviceId,callback:function(t){e.$set(e.search,"deviceId",t)},expression:"search.deviceId"}}),e._v(" "),a("span",[e._v("设备编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.deviceType,callback:function(t){e.$set(e.search,"deviceType",t)},expression:"search.deviceType"}})],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.ShowHide}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("控制器编码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add.deviceId,callback:function(t){e.$set(e.add,"deviceId",t)},expression:"add.deviceId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备识别码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add.deviceName,callback:function(t){e.$set(e.add,"deviceName",t)},expression:"add.deviceName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("产品型号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add.allot,callback:function(t){e.$set(e.add,"allot",t)},expression:"add.allot"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.deviceId,callback:function(t){e.$set(e.change,"deviceId",t)},expression:"change.deviceId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("流量卡卡号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.title,callback:function(t){e.$set(e.change,"title",t)},expression:"change.title"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.desc,callback:function(t){e.$set(e.change,"desc",t)},expression:"change.desc"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备型号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.tags,callback:function(t){e.$set(e.change,"tags",t)},expression:"change.tags"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("创建时间：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.authInfo,callback:function(t){e.$set(e.change,"authInfo",t)},expression:"change.authInfo"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.change=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.changeclick(e.change)}}},[e._v("修改")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看",visible:e.universal.look},on:{"update:visible":function(t){e.$set(e.universal,"look",t)}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"spanClassT"},[e._v("设备ID：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.id,callback:function(t){e.$set(e.con,"id",t)},expression:"con.id"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("接入协议：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.protocol,callback:function(t){e.$set(e.con,"protocol",t)},expression:"con.protocol"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("创建时间：")]),e._v(" "),a("el-input",{staticClass:"coied",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.create_time,callback:function(t){e.$set(e.con,"create_time",t)},expression:"con.create_time"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("鉴权信息：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.auth_info,callback:function(t){e.$set(e.con,"auth_info",t)},expression:"con.auth_info"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备名称：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.title,callback:function(t){e.$set(e.con,"title",t)},expression:"con.title"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备描述：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.desc,callback:function(t){e.$set(e.con,"desc",t)},expression:"con.desc"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备标签：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.tags,callback:function(t){e.$set(e.con,"tags",t)},expression:"con.tags"}}),a("br"),a("br")],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"spanClassT"},[e._v("设备经度：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.lon,callback:function(t){e.$set(e.con,"lon",t)},expression:"con.lon"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备纬度：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.lat,callback:function(t){e.$set(e.con,"lat",t)},expression:"con.lat"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("数据流名称：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.dataid,callback:function(t){e.$set(e.con,"dataid",t)},expression:"con.dataid"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("单位：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.unit,callback:function(t){e.$set(e.con,"unit",t)},expression:"con.unit"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("单位符号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.unit_symbol,callback:function(t){e.$set(e.con,"unit_symbol",t)},expression:"con.unit_symbol"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备在线状态：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}}),a("br"),a("br")],1)],1)],1)]),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"ICCID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.conCode))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.conCode))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"控制器编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.controid))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.controid))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.devCode))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.devCode))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"识别码匹配日期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.devDate))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.devDate))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.userName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.userName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售标识",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v("正常销售")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v("正常销售")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产品型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.model))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.model))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"解除流量卡匹配",placement:"top"}},[a("i",{staticClass:"icon-menu el-icon-sort",on:{click:function(a){e.deleteClick(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设备二维码",placement:"top"}},[a("i",{staticClass:"icon-setup el-icon-setting",on:{click:function(a){e.changeshow(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[1,2,3,10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("设备编号列表")])])])}]};var u=a("VU/8")(v,p,!1,function(e){a("olT6")},"data-v-23433e2a",null);t.default=u.exports},olT6:function(e,t){}});