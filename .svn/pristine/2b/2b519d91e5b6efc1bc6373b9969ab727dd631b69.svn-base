webpackJsonp([20],{R2OS:function(e,a){},rBJo:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("woOf"),n=t.n(s),i=t("Xxa5"),l=t.n(i),r=t("exGp"),c=t.n(r),o=t("mvHQ"),d=t.n(o),u=(t("mw3O"),t("OMN4"),t("2UA+"),t("UMo0")),p={name:"configurauthority",data:function(){return{paging:{page:1,pageSize:10,total:""},tableData:[],add1:{endTime:"",useTime:"",pastTime:"",userType:"1",appId:""},userfulTime:"2",universal:{change:!1,add1:!1},change:{},showchose:""}},computed:{},mounted:function(){document.title=this.$route.meta.title,0==localStorage.getItem("dealer")||123==localStorage.getItem("dealer")?this.showchose=!0:this.showchose=!1,this.searchClick()},methods:{operation:function(e){sessionStorage.setItem("configurInfo",d()(e)),this.$router.push({path:"/pageHome/configurauthority",query:{id:e.id}})},changeclick:function(){var e=this;return c()(l.a.mark(function a(){var t,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e.change),t={endTime:e.change.endTime,dealer:localStorage.getItem("dealer"),appId:e.change.appId,useTime:e.change.useTime,pastTime:e.change.pastTime,id:e.change.id},a.next=4,Object(u.z)(t);case 4:0==(s=a.sent).data.resCode&&0==s.data.resCode?(e.$message({message:"修改成功",type:"success"}),e.universal.change=!1,e.searchClick()):e.$message({message:"修改失败",type:"error"});case 6:case"end":return a.stop()}},a,e)}))()},changeShow:function(e){console.log(e),this.universal.change=!0,this.change=n()({},e)},ADD:function(){this.universal.add1=!0;this.add1.endTime="",this.add1.useTime="",this.add1.pastTime="",this.add1.userType="1",this.add1.appId=""},changetian:function(e){this.change.endTime=""},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.paging.page=e,this.searchClick()},addClick:function(){var e=this;return c()(l.a.mark(function a(){var t,s,n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=new Date(e.add1.useTime),!((s=new Date(e.add1.pastTime)).getTime(s)<t.getTime(t))){a.next=5;break}return e.$message.error("失效时间不能早于生效时间"),a.abrupt("return",!1);case 5:if(""!=e.add1.useTime&&""!=e.add1.pastTime&&""!=e.add1.endTime&&""!=e.userfulTime){a.next=8;break}return e.$message.error("带*的数据不能为空哦！"),a.abrupt("return",!1);case 8:return n={usefulTime:e.userfulTime,endTime:e.add1.endTime,useTime:e.add1.useTime,pastTime:e.add1.pastTime,appId:e.add1.appId,dealer:localStorage.getItem("dealer")},console.log(n),a.next=12,Object(u.j)(n);case 12:if("1"!=a.sent.data.resCode){a.next=18;break}return e.$message.error("已有配置，可进行更改"),a.abrupt("return",!1);case 18:e.$message({message:"配置成功",type:"success"}),e.universal.change=!1,e.searchClick();case 21:case"end":return a.stop()}},a,e)}))()},deleteClick:function(e){var a=this;console.log(e);var t=this;this.$confirm("此操作将删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(l.a.mark(function s(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,delfigt({id:e.id});case 2:0==a.sent.data.resCode?(t.$message({message:"删除成功",type:"success"}),t.searchClick()):t.$message({message:"删除失败",type:"error"});case 4:case"end":return a.stop()}},s,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})})},searchClick:function(){var e=this;return c()(l.a.mark(function a(){var t,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t={page:e.paging.page,pageSize:e.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")},a.next=3,Object(u.B)(t);case 3:"0"==(s=a.sent).data.resCode?(e.tableData=s.data.result,e.paging.total=s.data.count):(e.tableData=[],e.paging.total=0);case 5:case"end":return a.stop()}},a,e)}))()}}},m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"faultList"}},[e._m(0),e._v(" "),t("div",{staticClass:"select"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showchose,expression:"showchose"}],staticClass:"oyButton",staticStyle:{width:"100px!important"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.ADD}},[e._v("配置卡券权限")])],1),e._v(" "),t("div",{staticClass:"Content"},[t("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"公众号权限",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.appId))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.appId))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"账号权限",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.dealer))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.dealer))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"时间(天/日期)",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.endTime))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.endTime))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"配置生效时间",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.useTime))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.useTime))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"配置失效时间",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.pastTime))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.pastTime))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"配置卡券",placement:"top"}},[t("i",{staticClass:"icon-See el-icon-search",on:{click:function(t){e.operation(a.row)}}})]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[t("i",{staticClass:"icon-change el-icon-edit",on:{click:function(t){e.changeShow(a.row)}}})]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[t("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(t){e.deleteClick(a.row)}}})])]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"配置卡券权限",visible:e.universal.add1},on:{"update:visible":function(a){e.$set(e.universal,"add1",a)}}},[t("div",[t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("appId：")]),e._v(" "),t("el-input",{model:{value:e.add1.appId,callback:function(a){e.$set(e.add1,"appId",a)},expression:"add1.appId"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("固定天：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userfulTime,callback:function(a){e.userfulTime=a},expression:"userfulTime"}},e._l([{id:"1",name:"日期"},{id:"2",name:"天数"}],function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("生效时间：")]),e._v(" "),t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add1.useTime,callback:function(a){e.$set(e.add1,"useTime",a)},expression:"add1.useTime"}}),t("br"),t("br")],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"spanClass"},[e._v("\n            新老用户：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.add1.userType,callback:function(a){e.$set(e.add1,"userType",a)},expression:"add1.userType"}},e._l([{id:"1",name:"新用户"},{id:"2",name:"老用户"}],function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),t("br"),t("br"),e._v(" "),1==e.userfulTime?t("span",{staticClass:"spanClass"},[1==e.userfulTime?t("span",{staticClass:"aKey"},[e._v("*")]):e._e(),e._v("截止时间：")]):e._e(),e._v(" "),1==e.userfulTime?t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add1.endTime,callback:function(a){e.$set(e.add1,"endTime",a)},expression:"add1.endTime"}}):e._e(),1==e.userfulTime?t("br"):e._e(),1==e.userfulTime?t("br"):e._e(),e._v(" "),2==e.userfulTime?t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("截止天数：")]):e._e(),e._v(" "),2==e.userfulTime?t("el-input",{model:{value:e.add1.endTime,callback:function(a){e.$set(e.add1,"endTime",a)},expression:"add1.endTime"}}):e._e(),2==e.userfulTime?t("br"):e._e(),2==e.userfulTime?t("br"):e._e(),e._v(" "),t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("失效时间：")]),e._v(" "),t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add1.pastTime,callback:function(a){e.$set(e.add1,"pastTime",a)},expression:"add1.pastTime"}}),t("br"),t("br")],1)],1),e._v(" "),t("span",{staticClass:"spanClass"},[e._v("备注：")]),e._v(" "),t("div",{staticClass:"little"},[e._v(e._s(this.$store.state.size))])],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(a){e.universal.add1=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("确认")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"修改配置权限",visible:e.universal.change},on:{"update:visible":function(a){e.$set(e.universal,"change",a)}}},[t("div",[t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("appId：")]),e._v(" "),t("el-input",{attrs:{disabled:""},model:{value:e.change.appId,callback:function(a){e.$set(e.change,"appId",a)},expression:"change.appId"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("固定天：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.change.usefulTime,callback:function(a){e.$set(e.change,"usefulTime",a)},expression:"change.usefulTime"}},e._l([{id:"1",name:"日期"},{id:"2",name:"天数"}],function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("生效时间：")]),e._v(" "),t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.change.useTime,callback:function(a){e.$set(e.change,"useTime",a)},expression:"change.useTime"}}),t("br"),t("br")],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"spanClass"},[e._v("\n            新老用户：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.change.userType,callback:function(a){e.$set(e.change,"userType",a)},expression:"change.userType"}},e._l([{id:"1",name:"新用户"},{id:"2",name:"老用户"}],function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),t("br"),t("br"),e._v(" "),1==e.change.usefulTime?t("span",{staticClass:"spanClass"},[1==e.change.usefulTime?t("span",{staticClass:"aKey"},[e._v("*")]):e._e(),e._v("截止时间：")]):e._e(),e._v(" "),1==e.change.usefulTime?t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.change.endTime,callback:function(a){e.$set(e.change,"endTime",a)},expression:"change.endTime"}}):e._e(),1==e.change.usefulTime?t("br"):e._e(),1==e.change.usefulTime?t("br"):e._e(),e._v(" "),2==e.change.usefulTime?t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("截止天数：")]):e._e(),e._v(" "),2==e.change.usefulTime?t("el-input",{model:{value:e.change.endTime,callback:function(a){e.$set(e.change,"endTime",a)},expression:"change.endTime"}}):e._e(),2==e.change.usefulTime?t("br"):e._e(),2==e.change.usefulTime?t("br"):e._e(),e._v(" "),t("span",{staticClass:"spanClass"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("失效时间：")]),e._v(" "),t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.change.pastTime,callback:function(a){e.$set(e.change,"pastTime",a)},expression:"change.pastTime"}}),t("br"),t("br")],1)],1),e._v(" "),t("span",{staticClass:"spanClass"},[e._v("备注：")]),e._v(" "),t("div",{staticClass:"little"},[e._v(e._s(this.$store.state.size))])],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(a){e.universal.change=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.changeclick}},[e._v("确认")])],1)]),e._v(" "),t("div",{staticClass:"footer"},[t("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,15,20],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(a){e.$set(e.paging,"page",a)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"headerTitle"},[a("span",[this._v("配置卡券权限")])])])}]};var v=t("VU/8")(p,m,!1,function(e){t("R2OS")},"data-v-f94ee75c",null);a.default=v.exports}});