webpackJsonp([26],{"/wct":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("mw3O"),l=t.n(s),i=t("OMN4"),n=t.n(i),r={name:"equipmentList",data:function(){return{carps:[],chepai:!0,ADDCAR:"",checkbox:{checkedCities:[]},checked:!0,universal:{add:!1,change:!1,jurisdiction:!1,next:!1,look:!1},paging:{page:1,pageSize:10,total:0},empty:[[]],emptyTwo:"",tableData:[],search:{roadGateId:"",carNumber:""},numtable:[{value:0,type:"不启用"},{value:1,type:"启用"}],numtabless:[{value:0,type:"不启用"},{value:1,type:"启用"}],numtables:[{value:0,type:"不是"},{value:1,type:"是"}],add:{parkingId:"",carnumber:"",username:"",usercode:"",nbenable:"",nisusingtimeseg:"",startTime:"",endTime:"",nisblacklist:""},addDealers:{customerName:"",customerPhone:"",semail:"",area:"",address:""},change:{outTime:"",roadGateId:"",carNumber:""},carp:[],cari:"",options:[],dataUniversal:this.$store.state.activeName,updataUserId:"",imgs:[],showchose:""}},mounted:function(){document.title=this.$route.meta.title,0!=localStorage.getItem("dealer")?this.showchose=!1:this.showchose=!0,this.searchClick(),console.log(this.dataUniversal)},methods:{AddShow:function(){this.universal.add=!0;for(var e="",a=[0,1,2,3,4,5,6,7,8,9],t=0;t<6;t++)e+=a[Math.floor(10*Math.random())];console.log(),this.add.usercode=e},hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},acTiveArrStringFun:function(e){var a=[];if(null!=e&&0!=e.length)for(var t=0;t<e.length;t++)a.push(e[t]);return a.toString()},addClick:function(){if(""==this.add.parkingId)return this.$message.error("带*数据不能为空哦！1"),!1;if(""==this.add.carnumber)return this.$message.error("带*数据不能为空哦！2"),!1;if(""==this.add.username)return this.$message.error("带*数据不能为空哦！3"),!1;if(""==this.add.nisusingtimeseg)return this.$message.error("带*数据不能为空哦！5"),!1;if(""==this.add.startTime)return this.$message.error("带*数据不能为空哦！6"),!1;if(""==this.add.endTime)return this.$message.error("带*数据不能为空哦！7"),!1;console.log(this.add);var e={parkingId:this.add.parkingId,carnumber:this.add.carnumber,username:this.add.username,usercode:this.add.usercode,nbenable:this.add.nbenable,nisusingtimeseg:this.add.nisusingtimeseg,startTime:this.add.startTime,endTime:this.add.endTime,nisblacklist:this.add.nisblacklist},a=this;console.log(e),n()({method:"post",url:"http://192.168.2.110:3010//wirite/single/add",data:l.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.code?(a.searchClick(),a.$message({message:"添加成功",type:"success"})):a.$message({message:"添加失败",type:"error"})}),a.universal.add=!1},deleteClick:function(e){var a=this;console.log(e);var t=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n()({method:"post",url:t.$store.state.abc+"/brake/single/del",data:l.a.stringify({roadGateId:e.roadGateId,carNumber:e.carNumber})}).then(function(e){console.log(e.data),0==e.data.code?(t.searchClick(),t.$message({message:"删除成功",type:"success"})):t.$message({message:"删除失败",type:"error"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},changeShow:function(e){console.log(e),this.universal.change=!0,this.change.carNumber=e.brand,this.change.roadGateId=e.deviceid,this.change.outTime=e.outtime},changeClick:function(){var e={outTime:this.change.outTime,roadGateId:this.change.roadGateId,carNumber:this.change.carNumber};console.log(e);var a=this;n()({method:"post",url:a.$store.state.abc+"/brake/single/update",data:l.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.code?(a.searchClick(),a.$message({message:"修改成功",type:"success"})):(a.searchClick(),a.$message({message:"修改失败",type:"error"}))}),a.universal.change=!1},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.search.roadGateId&&(e.roadGateId=this.search.roadGateId),this.search.carNumber&&(e.carNumber=this.search.carNumber),console.log(e);var a=this;a.tableData=[],n()({method:"post",url:a.$store.state.abc+"/brake/single/find",data:l.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.code?(a.paging.total=e.data.count,a.tableData=e.data.result.reverse()):a.tableData=[]})}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"serviceList"}},[e._m(0),e._v(" "),t("div",{staticClass:"select"},[t("span",[e._v("设备编号：")]),e._v(" "),t("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.roadGateId,callback:function(a){e.$set(e.search,"roadGateId",a)},expression:"search.roadGateId"}}),e._v(" "),t("span",[e._v("车牌号码：")]),e._v(" "),t("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.carNumber,callback:function(a){e.$set(e.search,"carNumber",a)},expression:"search.carNumber"}})],1),e._v(" "),t("div",{staticClass:"select"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showchose,expression:"showchose"}],staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.AddShow}},[e._v("添加")]),e._v(" "),t("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),t("div",{staticClass:"Content"},[t("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"设备编号"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.deviceid))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.deviceid))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"车牌号码",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.brand))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.brand))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"过期时间",width:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",{staticClass:"TsMaxWidth"},[e._v(e._s(a.row.outtime))]),e._v(" "),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"overflowHide"},[e._v(e._s(a.row.outtime))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[t("i",{staticClass:"icon-change el-icon-edit",on:{click:function(t){e.changeShow(a.row)}}})]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[t("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(t){e.deleteClick(a.row)}}})])]}}])})],1)],1),e._v(" "),t("el-dialog",{staticClass:"changediv",attrs:{title:"添加",visible:e.universal.add},on:{"update:visible":function(a){e.$set(e.universal,"add",a)}}},[t("div",{staticClass:"total"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("停车场编号：")]),e._v(" "),t("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.parkingId,callback:function(a){e.$set(e.add,"parkingId",a)},expression:"add.parkingId"}}),e._v(" "),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("车牌号码：")]),e._v(" "),t("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.carnumber,callback:function(a){e.$set(e.add,"carnumber",a)},expression:"add.carnumber"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户姓名：")]),e._v(" "),t("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.username,callback:function(a){e.$set(e.add,"username",a)},expression:"add.username"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户编码：")]),e._v(" "),t("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.add.usercode,callback:function(a){e.$set(e.add,"usercode",a)},expression:"add.usercode"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("有效标记：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.add.nbenable,callback:function(a){e.$set(e.add,"nbenable",a)},expression:"add.nbenable"}},e._l(e.numtable,function(e){return t("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})),t("br"),t("br")],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("黑名单：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.add.nisblacklist,callback:function(a){e.$set(e.add,"nisblacklist",a)},expression:"add.nisblacklist"}},e._l(e.numtables,function(e){return t("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("时间段匹配：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.add.nisusingtimeseg,callback:function(a){e.$set(e.add,"nisusingtimeseg",a)},expression:"add.nisusingtimeseg"}},e._l(e.numtabless,function(e){return t("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("生效时间：")]),e._v(" "),t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add.startTime,callback:function(a){e.$set(e.add,"startTime",a)},expression:"add.startTime"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("结束时间：")]),e._v(" "),t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add.endTime,callback:function(a){e.$set(e.add,"endTime",a)},expression:"add.endTime"}}),t("br"),t("br")],1)],1),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("备注：")]),e._v(" "),t("div",{staticClass:"little"},[e._v(e._s(this.$store.state.size))])],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(a){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("添加")])],1)]),e._v(" "),t("el-dialog",{staticClass:"changediv",attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(a){e.$set(e.universal,"change",a)}}},[t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("车牌号码：")]),e._v(" "),t("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.change.carNumber,callback:function(a){e.$set(e.change,"carNumber",a)},expression:"change.carNumber"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备编号：")]),e._v(" "),t("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.change.roadGateId,callback:function(a){e.$set(e.change,"roadGateId",a)},expression:"change.roadGateId"}}),t("br"),t("br"),e._v(" "),t("span",{staticClass:"spanClassT"},[t("span",{staticClass:"aKey"},[e._v("*")]),e._v("过期时间：")]),e._v(" "),t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.change.outTime,callback:function(a){e.$set(e.change,"outTime",a)},expression:"change.outTime"}}),t("br"),t("br"),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.hideclick}},[e._v("取消")]),e._v(" "),t("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.changeClick}},[e._v("修改")])],1)],1),e._v(" "),t("div",{staticClass:"footer"},[t("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(a){e.$set(e.paging,"page",a)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"headerTitle"},[a("span",[this._v("道闸白名单")])])])}]};var o=t("VU/8")(r,c,!1,function(e){t("OD1n")},"data-v-d2d6087e",null);a.default=o.exports},OD1n:function(e,a){}});