webpackJsonp([74],{"1VT7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),n=a("exGp"),l=a.n(n),i=a("Dd8w"),o=a.n(i),c=(a("OMN4"),a("mw3O"),a("UMo0")),d=a("NYxO"),u={name:"mark",data:function(){return{internet:!1,data:[{key:1,label:"备选项 1"}],checkedCities1:[],cities:[],universal:{add:!1},add:{visStartDate:"",visEndDate:"",startTime:"",endTime:"",type:"",money01:"",mark01:"",money02:"",mark02:""},paging:{page:1,pageSize:10},tableData:[],value3:[1],total:"",clickid:""}},mounted:function(){this.searchClick(),this.searchpark(),this.cities=[]},watch:{apliyparkName:function(e,t){this.cities=e}},computed:o()({},Object(d.e)(["apliyparkName"])),methods:o()({},Object(d.b)(["Alipay"]),{searchpark:function(){var e={page:1,pageSize:0,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.Alipay(e)},software:function(){var e=this;return l()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return 0==e.checkedCities1.length&&e.$message({message:"请选择积分应用的停车场",type:"error"}),a="",e.checkedCities1.forEach(function(e){a+=e+","}),s={parkingId:a.substring(0,a.length-1),markConfigId:e.clickid,dealer:localStorage.getItem("dealer")},t.next=6,Object(c._43)(s);case 6:0==t.sent.data.code?e.$message({message:"绑定成功",type:"success"}):e.$message({message:"绑定失败",type:"error"}),e.internet=!1,e.searchClick();case 10:case"end":return t.stop()}},t,e)}))()},changemenu:function(e){console.log(e)},parkbind:function(e){this.internet=!0,this.clickid=e},searchClick:function(){var e=this;Object(c._53)({page:1,pageSize:10,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")}).then(function(t){1==t.data.resCode&&(e.tableData=t.data.result,e.total=t.data.count)})},handleChange:function(e,t,a){console.log(e,t,a)},deleteClick:function(e){var t=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("此操作将恢复订单数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.N)({id:e});case 2:0==(s=a.sent).data.code?t.$message({message:s.data.result,type:"success"}):t.$message({message:s.data.result,type:"error"}),t.searchClick();case 5:case"end":return a.stop()}},a,t)})));case 1:case"end":return a.stop()}},a,t)}))()},changemark:function(e){1==e?(this.add.money02="",this.add.mark02=""):2==e&&(this.add.money01="",this.add.mark01="")},isRealNum:function(e){return""!==e&&null!=e&&!isNaN(e)},adds:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.add.type&&""!=e.add.visStartDate&&""!=e.add.visEndDate){t.next=3;break}return e.$message.error("带*号数据不能空"),t.abrupt("return");case 3:if(1!=e.add.type){t.next=12;break}if(""!=e.add.money01&&""!=e.add.mark01){t.next=7;break}return e.$message.error("带*号数据不能空"),t.abrupt("return");case 7:if(e.isRealNum(e.add.money01)&&e.isRealNum(e.add.mark01)){t.next=10;break}return e.$message.error("金钱和积分只能为数字"),t.abrupt("return");case 10:t.next=27;break;case 12:if(2!=e.add.type){t.next=21;break}if(""!=e.add.money02&&""!=e.add.mark02){t.next=16;break}return e.$message.error("带*号数据不能空"),t.abrupt("return");case 16:if(e.isRealNum(e.add.money02)&&e.isRealNum(e.add.mark02)){t.next=19;break}return e.$message.error("金钱和积分只能为数字"),t.abrupt("return");case 19:t.next=27;break;case 21:if(""!=e.add.money01&&""!=e.add.mark01&&""!=e.add.money02&&""!=e.add.mark02){t.next=24;break}return e.$message.error("带*号数据不能空"),t.abrupt("return");case 24:if(e.isRealNum(e.add.money01)&&e.isRealNum(e.add.mark01)&&e.isRealNum(e.add.money02)&&e.isRealNum(e.add.mark02)){t.next=27;break}return e.$message.error("金钱和积分只能为数字"),t.abrupt("return");case 27:return t.next=29,Object(c.l)({startTime:e.add.visStartDate,endTime:e.add.visEndDate,type:e.add.type,money01:e.add.money01?e.add.money01:0,mark01:e.add.mark01?e.add.mark01:0,money02:e.add.money02?e.add.money02:0,mark02:e.add.mark02?e.add.mark02:0,dealer:localStorage.getItem("dealer")});case 29:0==(a=t.sent).data.code?e.$message({type:"success",message:a.data.result}):e.$message({type:"error",message:a.data.result}),e.universal.add=!1;case 32:case"end":return t.stop()}},t,e)}))()}})},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"InstallManList"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.universal.add=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"满(N)元\t",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(0==t.row.money01?"-":t.row.money01))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(0==t.row.money01?"-":t.row.money01))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"积(N)分",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(0==t.row.mark01?"-":t.row.mark01))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(0==t.row.mark01?"-":t.row.mark01))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"N个积分",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(0==t.row.mark02?"-":t.row.mark02))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(0==t.row.mark02?"-":t.row.mark02))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"抵用N元",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(0==t.row.money02?"-":t.row.money02))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(0==t.row.money02?"-":t.row.money02))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开始时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.startTime))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.startTime))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.endTime))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.endTime))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteClick(t.row.id)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"绑定车场",placement:"top"}},[a("i",{staticClass:"jilu iconfont icon-bangding",on:{click:function(a){e.parkbind(t.row.id)}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("积分类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changemark},model:{value:e.add.type,callback:function(t){e.$set(e.add,"type",t)},expression:"add.type"}},e._l([{roleName:"可积分",roleId:"1"},{roleName:"可抵用",roleId:"2"},{roleName:"积分和抵用",roleId:"12"}],function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),a("br"),a("br"),e._v(" "),"1"==e.add.type||"12"==e.add.type?a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("满(N)元：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.money01,callback:function(t){e.$set(e.add,"money01",t)},expression:"add.money01"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("积(N)分：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.mark01,callback:function(t){e.$set(e.add,"mark01",t)},expression:"add.mark01"}}),a("br"),a("br")],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:12}},["2"==e.add.type||"12"==e.add.type?a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("N个积分：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.mark02,callback:function(t){e.$set(e.add,"mark02",t)},expression:"add.mark02"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("抵用N元：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.money02,callback:function(t){e.$set(e.add,"money02",t)},expression:"add.money02"}}),a("br"),a("br")],1):e._e(),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("开始时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add.visStartDate,callback:function(t){e.$set(e.add,"visStartDate",t)},expression:"add.visStartDate"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("结束时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add.visEndDate,callback:function(t){e.$set(e.add,"visEndDate",t)},expression:"add.visEndDate"}}),a("br"),a("br")],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.adds}},[e._v("提交")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"积分应用停车场",visible:e.internet},on:{"update:visible":function(t){e.internet=t}}},[a("el-checkbox-group",{attrs:{min:1},on:{change:e.changemenu},model:{value:e.checkedCities1,callback:function(t){e.checkedCities1=t},expression:"checkedCities1"}},e._l(e.cities,function(t){return a("el-checkbox",{key:t.parking_id,attrs:{label:t.parking_id,value:t.parking_name}},[e._v(e._s(t.parking_name))])})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.internet=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.software}},[e._v("确认")])],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("积分管理")])])])}]};var m=a("VU/8")(u,p,!1,function(e){a("lGL8")},"data-v-30c888c5",null);t.default=m.exports},lGL8:function(e,t){}});