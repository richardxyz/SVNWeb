webpackJsonp([66],{KyUR:function(e,t){},fOqO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),l=a.n(s),o=a("woOf"),n=a.n(o),r=a("bOdI"),i=a.n(r),c=a("mw3O"),d=a.n(c),h=a("OMN4"),u=a.n(h),p={name:"equipmentList",data:function(){var e;return e={levelList:[],level:"0",add1:{weChatType:"",weChatFullName:"",weChatUsePassword:"",weChatUsePhone:"",weChatUseName:""},li:[],added:"",send:{deviceId:"",title:"",timeOut:"",qos:""},change:{title:"",desc:"",tags:"",lon:"",lat:"",authInfo:"",deviceId:""},status:"",universal:{add:!1,change:!1,look:!1,send:!1,allot:!1},tableData:[],con:{id:"",protocol:"",create_time:"",auth_info:"",title:"",desc:"",tags:"",lon:"",lat:"",dataid:"",unit:"",unit_symbol:""}},i()(e,"li",[]),i()(e,"add",!1),i()(e,"topic",!1),i()(e,"conGroup",!1),i()(e,"change",!1),i()(e,"send",!1),i()(e,"see",!1),i()(e,"changeGroups",!1),i()(e,"changeGrouping",{changeGrouping:"",conId:""}),i()(e,"step",0),i()(e,"seeStep",1),i()(e,"paging",{page:1,pageSize:10,total:0}),i()(e,"allot1",{deviceId:"",trafficCard:"",deviceType:"",deviceModel:"",deviceName:"",createTime:"",personnel:"",status:""}),i()(e,"search",{weChatUseName:"",Id:"",start:"",end:"",modelstyle:"",modelphoto:""}),e},mounted:function(){this.searchClick(),document.title=this.$route.meta.title,"123"==sessionStorage.getItem("dealer")&&(this.added=1)},methods:{hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,console.log(this.paging.pageSize)},next:function(){var e=this;0==this.step?u()({method:"post",url:e.$store.state.http+"/concode/conByCarBrand",data:d.a.stringify({conLocaid:e.addTo.list.conLocaid,carBrand:e.addTo.list.carBrand})}).then(function(t){if(console.log(t.data),0!=t.data.resCode)return e.$message.error("此定位器ID不存在"),e.addTo.list.conLocaid="",!1;console.log(t.data.result),e.step++>3&&(e.step=0,e.add=!1)}):e.step++>3&&(e.step=0,e.add=!1)},nextSee:function(){this.seeStep++>1&&(this.seeStep=1)},handleCurrentChange:function(e){},addClick:function(){if(""==this.add1.weChatType)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatFullName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatUsePassword)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatUsePhone)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatUseName)return this.$message.error("带*的数据不能为空哦！"),!1;var e=this.add1,t=this;e.dealer=sessionStorage.getItem("dealer"),console.log(e),u()({method:"post",dataType:"jsonp",url:this.$store.state.http+"/wechatUser/add",data:d.a.stringify(e)}).then(function(e){console.log(e),console.log(e.data.errMsg.split(":")[1]),localStorage.setItem("id",e.data.errMsg.split(":")[1]),0==e.data.resCode?(t.searchClick(),t.$message({message:"添加成功",type:"success"})):6==e.data.resCode&&t.$alert(e.data.result,"请勿重复添加",{confirmButtonText:"确定"})}),t.universal.add=!1},deleteChild:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),u()({method:"post",url:t.$store.state.http+"/wechatUser/removeWechatDev",data:d.a.stringify({id:e.id})}).then(function(t){console.log(t),0==t.data.resCode?(console.log(0xf6b75ab2bc47200),a.changeGroupShow(e),a.$message({message:"删除成功",type:"success"})):a.$alert(t.data.result,"系统确认框",{confirmButtonText:"确定"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteClick:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),u()({method:"post",url:t.$store.state.http+"/dev2dealer/delete",data:d.a.stringify({id:e.id})}).then(function(e){console.log(e),0==e.data.resCode?(a.searchClick(),a.$message({message:"删除成功",type:"success"})):a.$alert(e.data.result,"系统确认框",{confirmButtonText:"确定"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeshow:function(e){this.universal.change=!0,this.change=n()({},e),console.log(e)},changeclick:function(e){if(""==this.change.weChatUseName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatUsePhone)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatUsePassword)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatFullName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatType)return this.$message.error("带*的数据不能为空哦！"),!1;var t=this,a=this.change;a.wechatUser=e.wechatUser,console.log(a),u()({method:"post",url:this.$store.state.http+"/wechatUser/update",data:d.a.stringify(a)}).then(function(e){console.log(e.data),0==e.data.resCode?(t.searchClick(),t.$message({message:"修改成功",type:"success"})):(t.searchClick(),t.$message({message:"修改失败",type:"error"}))}),this.universal.change=!1},order:function(e){this.universal.send=!0,this.send=e},allotchange:function(e){if(void 0==this.allot1.weChatUseNames)return this.$message.error("带*的数据不能为空哦！"),!1;var t=this;console.log(t.allot1.weChatUseNames);var a={deviceId:t.allot1.weChatUseNames,weChatUsePhone:e.weChatUsePhone};console.log(a),u()({method:"post",url:this.$store.state.http+"/wechatUser/addWechatDev",data:d.a.stringify(a)}).then(function(e){console.log(e),t.universal.allot=!1,t.allot1.weChatUseNames="",0==e.data.resCode?(t.searchClick(),t.$message({message:"分配成功",type:"success"})):1==e.data.resCode&&t.$message({message:"请勿重复添加或添加有效设备",type:"error"})})},allot:function(e){this.universal.allot=!0,this.allot1=e;console.log(e);var t={weChatUsePhone:e.weChatUsePhone};console.log(t)},changeGroupShow:function(e){this.look=e,this.universal.look=!0;var t=this,a={weChatUsePhone:e.weChatUsePhone};console.log(a),sessionStorage.setItem("weChatUsePhone",e.weChatUsePhone),u()({method:"post",url:this.$store.state.http+"/wechatUser/findDevbyUser",data:d.a.stringify(a)}).then(function(e){console.log(e),t.li=e.data.s})},searchClick:function(){var e={};(e="SURIOT"==localStorage.getItem("userId")?{page:this.paging.page,pageSize:this.paging.pageSize,userType:localStorage.getItem("userType"),dealerCode:localStorage.getItem("dealerId")}:{page:this.paging.page,pageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),userType:localStorage.getItem("userType"),dealerCode:localStorage.getItem("dealerId")}).weChatType=this.search.modelstyle,e.weChatUsePhone=this.search.modelphoto;var t=this;t.tableData=[],console.log(e),u()({method:"post",url:this.$store.state.http+"/dev2dealer/list",data:d.a.stringify(e)}).then(function(e){if(console.log(e),0==e.data.resCode){for(var a=0;a<e.data.results.length;a++)e.data.results[a].time=t.common.timeToDate(l()(e.data.results[a].time).slice(0,10));t.tableData=e.data.results,t.paging.total=e.data.count}else t.tableData=[],t.paging.total=0})},changeGroup:function(){var e=this.add1,t=this;u()({method:"post",url:this.$store.state.http+"/devices/ModifyDevices",data:d.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.resCode?(t.searchClick(),t.$message({message:"修改成功",type:"success"})):t.$alert(e.data.result,"系统确认框",{confirmButtonText:"确定"}),t.changeGroups=!1})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"PSTlist"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("设备编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.modelstyle,callback:function(t){e.$set(e.search,"modelstyle",t)},expression:"search.modelstyle"}})],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.universal.add=!0}}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备识别码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.weChatUseName,callback:function(t){e.$set(e.add1,"weChatUseName",t)},expression:"add1.weChatUseName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("经销商：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.weChatUsePhone,callback:function(t){e.$set(e.add1,"weChatUsePhone",t)},expression:"add1.weChatUsePhone"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"分配",visible:e.universal.allot},on:{"update:visible":function(t){e.$set(e.universal,"allot",t)}}},[a("div",[a("span",{staticClass:"spanClass"},[e._v("账户名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatFullName,callback:function(t){e.$set(e.allot1,"weChatFullName",t)},expression:"allot1.weChatFullName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("手机号码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatUsePhone,callback:function(t){e.$set(e.allot1,"weChatUsePhone",t)},expression:"allot1.weChatUsePhone"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("用户密码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatUsePassword,callback:function(t){e.$set(e.allot1,"weChatUsePassword",t)},expression:"allot1.weChatUsePassword"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("用户姓名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatUseName,callback:function(t){e.$set(e.allot1,"weChatUseName",t)},expression:"allot1.weChatUseName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("用户类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatType,callback:function(t){e.$set(e.allot1,"weChatType",t)},expression:"allot1.weChatType"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT spanClassTL"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备ID：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.allot1.weChatUseNames,callback:function(t){e.$set(e.allot1,"weChatUseNames",t)},expression:"allot1.weChatUseNames"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.allot=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.allotchange(e.allot1)}}},[e._v("分配")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("账户名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatUseName,callback:function(t){e.$set(e.change,"weChatUseName",t)},expression:"change.weChatUseName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("手机号码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatUsePhone,callback:function(t){e.$set(e.change,"weChatUsePhone",t)},expression:"change.weChatUsePhone"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户密码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatUsePassword,callback:function(t){e.$set(e.change,"weChatUsePassword",t)},expression:"change.weChatUsePassword"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户姓名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatFullName,callback:function(t){e.$set(e.change,"weChatFullName",t)},expression:"change.weChatFullName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatType,callback:function(t){e.$set(e.change,"weChatType",t)},expression:"change.weChatType"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.hideclick}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.changeclick(e.change)}}},[e._v("修改")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看",visible:e.universal.look},on:{"update:visible":function(t){e.$set(e.universal,"look",t)}}},[a("div",[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.li}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备ID",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceId))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteChild(t.row)}}})])]}}])})],1)],1)]),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" --\x3e\n\t\t\t\t\n\t\t\t\t"),a("el-table-column",{attrs:{label:"客户编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.dealerCode))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.dealerCode))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客户名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.dealerName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.dealerName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"绑定手机"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v("-")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v("-")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"绑定邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v("-")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v("-")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceMac))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceMac))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"识别码匹配日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.time))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.time))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.userName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.userName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteClick(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[1,2,3,10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("客户设备分配")])])])}]};var g=a("VU/8")(p,v,!1,function(e){a("KyUR")},"data-v-3e8d8acf",null);t.default=g.exports}});