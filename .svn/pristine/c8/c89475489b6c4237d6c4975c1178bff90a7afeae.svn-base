webpackJsonp([10],{"4v50":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),i=a("exGp"),o=a.n(i),s=a("Dd8w"),c=a.n(s),l=(a("mtWM"),a("mw3O")),u=a.n(l),d=a("Au9i"),m=a("NYxO"),g=a("UMo0"),h={name:"record",data:function(){return{col:"",texts:1,griddata:[],Data:[],num:1,table:"",wrapperHeight:0,arr:[],imgal:!1,gval:[],uncompleteList:[],parameter:!0,allLoaded:!1,page:0,queryLoading:!1,moreLoading:!1,onelist:[],twolist:[],acarnumber:[]}},computed:c()({},Object(m.c)(["listrecord"])),methods:c()({},Object(m.b)(["rcodes"]),{delcount:function(t){var e,a=this;d.MessageBox.confirm("",{message:"确认要删除停车记录么？",title:"提示",confirmButtonText:"确定",cancelButtonText:"取消"}).then((e=o()(n.a.mark(function e(r){var i,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("confirm"!=r){e.next=8;break}return console.log(t),i={out_trade_no:t.out_trade_no},e.next=5,Object(g.i)(i);case 5:o=e.sent,console.log(o),0==o.data.resCode?(Object(d.MessageBox)("提示","删除成功"),window.location.reload()):Object(d.MessageBox)("提示","删除失败");case 8:case"end":return e.stop()}},e,a)})),function(t){return e.apply(this,arguments)}))},status:function(t){return 1==t?"未支付":0==t?"完成":"已退款"},fmtDate:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var n=e.getDate();n=n<10?"0"+n:n;var i=e.getHours();i=i<10?"0"+i:i;var o=e.getMinutes(),s=e.getSeconds();return o=o<10?"0"+o:o,s=s<10?"0"+s:s,a+" 年 "+r+" 月 "+n+" 日 "+i+":"+o},search:function(){},loadMore1:function(t){var e=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.arr=[],e.$http({method:"post",url:e.httpUrl+"/feeOrder/orders",data:u.a.stringify({page:1,is_del:0,pageSize:1e3,userId:"SURIOT",dealer:123,carnumber:t[0].brandname})}).then(function(t){console.log(t),e.more_loading=!0;0==t.data.resCode&&(console.log(t.data.result),d.Indicator.close(),console.log(e.acarnumber.length),1==e.acarnumber.length?t.data.result.length?e.uncompleteList=t.data.result:e.imgal=!0:(e.onelist=t.data.result,console.log([]),e.loadMore2(e.acarnumber)))});case 2:case"end":return a.stop()}},a,e)}))()},loadMore2:function(t){var e=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.arr=[],e.$http({method:"post",url:e.httpUrl+"/feeOrder/orders",data:u.a.stringify({page:1,is_del:0,pageSize:1e3,userId:"SURIOT",dealer:123,carnumber:t[1].brandname})}).then(function(t){console.log(t),e.more_loading=!0;0==t.data.resCode&&(console.log(e.onelist),console.log(t.data.result),e.twolist=t.data.result,e.uncompleteList=e.onelist.concat(e.twolist),e.uncompleteList=e.uncompleteList.sort(function(t,e){return e.date.time-t.date.time}),0==e.uncompleteList.length?e.imgal=!0:e.imgal=!1,console.log(e.uncompleteList),d.Indicator.close())});case 2:case"end":return a.stop()}},a,e)}))()}}),mounted:function(){var t=this;d.Indicator.open("Loading..."),Object(g.q)({openid:this.openid}).then(function(e){d.Indicator.close(),t.acarnumber=e.data.result,200==e.data.resCode&&(e.data.result.length?1==t.acarnumber.length?t.loadMore1(t.acarnumber):2==t.acarnumber.length&&t.loadMore1(t.acarnumber):t.imgal=!0)})}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{width:"100%",background:"#efefef",height:"100%"}},[r("ul",{staticClass:"recordli",staticStyle:{"padding-top":"0.1rem"}},t._l(t.uncompleteList,function(e){return r("li",{staticStyle:{height:"1.1rem"}},[r("h5",{staticStyle:{"justify-content":"space-between"}},[r("span",{staticStyle:{"font-size":"0.15rem",color:"#333333"}},[t._v("入场时间："+t._s(t.fmtDate(e.date.time)))]),t._v(" "),r("img",{staticStyle:{width:"0.15rem",height:"0.15rem","margin-right":"0.2rem"},attrs:{src:a("JzIT"),alt:""},on:{click:function(a){t.delcount(e)}}})]),t._v(" "),r("div",{staticClass:"la",staticStyle:{"font-size":"0.13rem",color:"#787878"}},[r("div",[r("div",{staticStyle:{"margin-top":"0.1rem","margin-left":"0.25rem"}},[r("i",{staticClass:"s",staticStyle:{"margin-right":"0.1rem"}}),t._v("停车场名称: "+t._s(e.parking_lot_name)+"\n              "),r("span",{staticStyle:{float:"right","margin-right":"0.2rem"}},[t._v(t._s(t.status(e.order_status)))])]),t._v(" "),r("div",{staticStyle:{"margin-top":"0.1rem","margin-left":"0.25rem"}},[r("i",{staticClass:"e",staticStyle:{"margin-right":"0.1rem"}}),t._v("停车时长: "+t._s(e.longdate?e.longdate:"暂无记录")+"\n              "),r("span",{staticStyle:{float:"right","margin-right":"0.2rem"}},[t._v("优惠金额："+t._s(e.onsale_price)+"元")])]),t._v(" "),r("div",{staticStyle:{"margin-top":"0.1rem","margin-left":"0.25rem"}},[r("i",{staticClass:"e",staticStyle:{"margin-right":"0.1rem"}}),t._v("车牌号码: "+t._s(e.carnumber)+"\n              "),r("span",{staticStyle:{float:"right","margin-right":"0.2rem"}},[t._v("总计："+t._s(e.price)+"元")])])])])])})),t._v(" "),t.imgal?r("div",{staticStyle:{"padding-top":"1rem"}},[t._m(0)]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{width:"1.12rem",height:"1.01rem",margin:"0rem auto"}},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a("lT4e"),alt:""}})])}]};var f=a("VU/8")(h,p,!1,function(t){a("Ubnu")},"data-v-fdbc6d28",null);e.default=f.exports},Ubnu:function(t,e){}});