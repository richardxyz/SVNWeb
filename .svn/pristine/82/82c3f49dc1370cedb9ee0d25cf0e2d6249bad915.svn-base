webpackJsonp([40],{FTH2:function(e,t){},P6tZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),o=a.n(s),n=a("Xxa5"),i=a.n(n),l=a("exGp"),c=a.n(l),r=a("mw3O"),d=a.n(r),h=a("OMN4"),p=a.n(h),u=(a("4s4v"),a("NYxO"),a("UMo0")),m={name:"bankInfo",data:function(){return{search:{bankDesc:"",phone:""},paging:{page:1,pageSize:10,total:0},tableData:[],addWashmod:!1,editWashmod:!1,uploadimg:!1,uploadimgId:"",washmod:{bankDesc:"",phone:"",remark:""},fileList3:[],rules:{bankDesc:[{required:!0,message:"不能为空",trigger:"blur"}],phone:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("不能为空"));setTimeout(function(){t.length<6||t.length>12?a(new Error("客服电话长度不能小于6位大于12位")):a()},1e3)},trigger:"blur"}]}}},computed:{},mounted:function(){this.handleSearchClick()},methods:{clear:function(){this.washmod={bankDesc:"",phone:"",remark:""}},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSearchClick:function(){var e={Page:this.paging.page,PageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.search.bankDesc&&(e.bankDesc=this.search.bankDesc),this.search.phone&&(e.phone=this.search.phone);var t=this;t.tableData=[],Object(u._20)(e).then(function(e){console.log(e),0==e.data.resCode?(t.tableData=e.data.result,t.paging.total=e.data.count):(t.tableData=[],t.paging.total=0)})},handleSizeChange:function(e){this.paging.pageSize=e,this.handleSearchClick()},handleCurrentChange:function(e){this.paging.page=e,this.handleSearchClick()},operation:function(e){console.log(e),this.$router.push({path:"/pageHome/bankUserInfo",query:{id:e.id,bankDesc:e.bankDesc}})},uploadImg:function(e){this.uploadimgId=e,this.uploadimg=!0},uploadFile:function(e){var t=this;if(!(e.size/1024/1024<2))return this.$message({message:"上传背景图片大小不能超过 2MB!",type:"error"}),!1;var a=new FormData;a.append("imgFile",e),a.append("id",this.uploadimgId);e=a;p()({method:"post",url:this.$store.state.wash_url+"/bankInfo/upLoadImg",data:e}).then(function(e){0==e.data.code?(console.log(e),t.$message({message:"上传成功",type:"success"}),t.uploadimg=!1,t.handleSearchClick()):(t.$message({message:"上传失败",type:"error"}),t.uploadimg=!1,t.handleSearchClick())})},handleExceed:function(e,t){this.$message.error("当前限制上传1张图片，本次选择了"+e.length+"张图片，共"+(e.length+t.length)+"张图片，请删除图片重新上传")},handleRemove:function(e,t){console.log(e,t)},handleAvatarSuccess:function(e,t){console.log(e),console.log(t)},add:function(){this.addWashmod=!0,this.editWashmod=!1,this.clear()},ClickAddwashmod:function(e){var t=this;return c()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(e){if(e){t.washmod.dealer=localStorage.getItem("dealer");p()({method:"post",url:t.$store.state.wash_url+"/bankInfo/insert",data:d.a.stringify(t.washmod)}).then(function(e){0==e.data.code?(console.log(e),t.$message({message:"添加成功",type:"success"}),t.addWashmod=!1,t.handleSearchClick()):t.$message({message:"添加失败",type:"error"})})}});case 1:case"end":return a.stop()}},a,t)}))()},handleEditwashmod:function(e){console.log(e),this.addWashmod=!0,this.editWashmod=!0,console.log(this.tableData);var t=this.tableData.find(function(t){return t.id==e});console.log(t),o()(this.washmod,{bankDesc:t.bankDesc,phone:t.phone,remark:t.remark,id:e})},ClickEditwashmod:function(e){var t=this;console.log(e),this.$refs[e].validate(function(e){e&&(""==t.washmod.remark&&delete t.washmod.remark,p()({method:"post",url:t.$store.state.wash_url+"/bankInfo/update",data:d.a.stringify(t.washmod)}).then(function(e){0==e.data.code?(console.log(e),t.$message({message:"修改成功",type:"success"}),t.addWashmod=!1,t.handleSearchClick()):t.$message({message:"修改失败",type:"error"})}))})},ClickDeletewashmod:function(e){var t=this;this.$confirm("确认删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.G)({id:e}).then(function(e){console.log(e),0==e.data.code?(t.$message({type:"success",message:"删除成功!"}),t.handleSearchClick()):t.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"xichemoshi"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("银行名称：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.bankDesc,callback:function(t){e.$set(e.search,"bankDesc",t)},expression:"search.bankDesc"}}),e._v(" "),a("span",[e._v("客服电话：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.phone,callback:function(t){e.$set(e.search,"phone",t)},expression:"search.phone"}})],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.add}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.handleSearchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"银行名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.bankDesc))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.bankDesc))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客服电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.phone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.phone))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.remark))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.remark))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看用户详情",placement:"top"}},[a("i",{staticClass:"icon-See el-icon-search",on:{click:function(a){e.operation(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[a("i",{staticClass:"icon-change el-icon-edit",on:{click:function(a){e.handleEditwashmod(t.row.id)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上传背景图",placement:"top"}},[a("i",{staticClass:"icon-See el-icon-news",on:{click:function(a){e.uploadImg(t.row.id)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.ClickDeletewashmod(t.row.id)}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.editWashmod?"查看修改银行信息":"添加",visible:e.addWashmod},on:{"update:visible":function(t){e.addWashmod=t}}},[a("el-form",{ref:"washmod",attrs:{inline:!0,model:e.washmod,rules:e.rules}},[a("el-form-item",{attrs:{label:"银行名称",prop:"bankDesc"}},[a("el-input",{model:{value:e.washmod.bankDesc,callback:function(t){e.$set(e.washmod,"bankDesc",t)},expression:"washmod.bankDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客服电话",prop:"bankDesc"}},[a("el-input",{model:{value:e.washmod.phone,callback:function(t){e.$set(e.washmod,"phone",t)},expression:"washmod.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:e.washmod.remark,callback:function(t){e.$set(e.washmod,"remark",t)},expression:"washmod.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addWashmod=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){e.editWashmod?e.ClickEditwashmod("washmod"):e.ClickAddwashmod("washmod")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"上传背景图",visible:e.uploadimg},on:{"update:visible":function(t){e.uploadimg=t}}},[a("div",{staticStyle:{width:"50%",margin:"0 auto"}},[a("el-upload",{staticClass:"upload-demo",attrs:{name:"file","on-exceed":e.handleExceed,"on-success":e.handleAvatarSuccess,"before-upload":e.uploadFile,action:"https://jsonplaceholder.typicode.com/posts/",drag:"",limit:1,"file-list":e.fileList3,"on-remove":e.handleRemove,multiple:"false"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n          "),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过2M，最好为纯色背景图")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.uploadimg=!1}}},[e._v("取消")])],1)]),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,15,20],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("银行信息")])])])}]};var f=a("VU/8")(m,g,!1,function(e){a("FTH2")},"data-v-7b9b23be",null);t.default=f.exports}});