webpackJsonp([22],{"4R5O":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),o=a.n(s),l=(a("mw3O"),a("OMN4"),a("NYxO"),a("UMo0")),n=(a("KDrK"),a("qKYu"),a("2UA+"),{name:"storeList",data:function(){return{id:"",shopName:"",paging:{page:1,pageSize:10,total:0},tableData:[],search:{carShopId:"",name:"",tel:"",typePerson:""},addB:{carShopId:"",typePerson:"",name:"",tel:""},shopList:[],stafftype:[{typePerson:1,label:"销售员"},{typePerson:2,label:"售后员"},{typePerson:3,label:"其他员工"}],universal:{add:!1,exit:!1,look:!1},look:{}}},mounted:function(){this.$route.query.id&&(this.id=this.$route.query.id,this.addB.carShopId=this.id),this.$route.query.shopName&&(this.shopName=this.$route.query.shopName),this.searchClick(),this.getshopList()},computed:{},methods:{getshopList:function(){var e=this,t={page:1,pageSize:500,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.shopList=[],Object(l._27)(t).then(function(t){if(console.log(t),t.data.count>0){for(var a=0;a<t.data.count;a++){var s={id:t.data.result[a].id,shopName:t.data.result[a].shopName};e.shopList.push(s)}console.log(e.shopList)}else e.shopList=[]})},AddShow:function(){this.universal.add=!0,this.clear()},changeShow:function(e){console.log(e),this.universal.add=!0,this.universal.exit=!0,o()(this.addB,e)},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.paging.page=e,this.searchClick()},addClick:function(){var e=this;return console.log(e.addB),""==e.addB.carShopId||""==e.addB.typePerson||""==e.addB.name||""==e.addB.tel?(e.$message.error("带*的数据不能为空哦！"),!1):""==e.addB.tel||/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(this.addB.tel)?(e.addB.dealer=localStorage.getItem("dealer"),console.log(e.addB),void Object(l.n)(e.addB).then(function(t){console.log(t),0==t.data.resCode?(e.$message({message:"添加成功",type:"success"}),e.universal.add=!1,e.searchClick()):e.$message({message:t.data.result,type:"error"})})):(e.$message.error("请输入正确的手机号码"),!1)},exitClick:function(){var e=this;if(console.log(e.addB),""==e.addB.carShopId||""==e.addB.typePerson||""==e.addB.name||""==e.addB.tel)return e.$message.error("带*的数据不能为空哦！"),!1;if(""!=e.addB.tel&&!/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(this.addB.tel))return e.$message.error("请输入正确的手机号码"),!1;e.addB.dealer=localStorage.getItem("dealer"),delete e.addB.date,console.log(e.addB);var t={id:e.addB.id,carShopId:e.addB.carShopId,typePerson:e.addB.typePerson,name:e.addB.name,tel:e.addB.tel,dealer:localStorage.getItem("dealer")};Object(l._3)(t).then(function(t){console.log(t),0==t.data.resCode?(e.$message({message:"修改成功",type:"success"}),e.universal.add=!1,e.universal.exit=!1,e.searchClick()):e.$message({message:t.data.result,type:"error"})})},deleteClick:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.P)({id:e.id}).then(function(e){console.log(e),0==e.data.resCode?(a.searchClick(),a.$message({message:"删除成功",type:"success"})):a.$message({message:"删除失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.search.carShopId&&(e.carShopId=this.search.carShopId),this.search.name&&(e.name=this.search.name),this.search.tel&&(e.tel=this.search.tel),this.search.typePerson&&(e.typePerson=this.search.typePerson),""!=this.id&&(e.carShopId=this.id);var t=this;t.tableData=[],Object(l._28)(e).then(function(e){e.data.count>0?(t.paging.total=e.data.count,t.tableData=e.data.result):(t.tableData=[],t.paging.total=0)})},operation:function(e){console.log(e),this.$router.push({path:"/pageHome/storeStaffWash",query:{id:e.id,name:e.name}})},seeClick:function(e){this.universal.look=!0,o()(this.look,e)},clear:function(){""!=this.id?this.addB.carShopId=this.id:this.addB.carShopId="",this.addB.typePerson="",this.addB.name="",this.addB.tel=""},choseshopname:function(e){return this.shopList.forEach(function(t,a){t.id==e&&(e=t.shopName)}),e},chosestafftype:function(e){return this.stafftype.forEach(function(t,a){t.typePerson==e&&(e=t.label)}),e}}}),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"faultList"}},[a("div",{staticClass:"header"},[a("div",{staticClass:"headerTitle"},[a("router-link",{attrs:{to:"/pageHome/siteList",tag:"span"}},[e._v("站点列表")]),e._v(" "),a("router-link",{attrs:{to:"/pageHome/storeList",tag:"span"}},[e._v("店铺管理")]),e._v(" "),a("router-link",{staticClass:"router-link-active",attrs:{to:"/pageHome/storeStaff",tag:"span"}},[e._v(e._s(e.shopName)+"店员管理")]),e._v(" "),""!=e.id?a("el-button",{staticClass:"oyButton back",staticStyle:{float:"right"},attrs:{type:"success"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"select"},[""==e.id?a("span",[e._v("店铺名称：")]):e._e(),e._v(" "),""==e.id?a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:e.search.carShopId,callback:function(t){e.$set(e.search,"carShopId",t)},expression:"search.carShopId"}},[a("el-option",[e._v("未选择")]),e._v(" "),e._l(e.shopList,function(e){return a("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})})],2):e._e(),e._v(" "),a("span",[e._v("姓名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),e._v(" "),a("span",[e._v("手机号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.tel,callback:function(t){e.$set(e.search,"tel",t)},expression:"search.tel"}}),e._v(" "),a("span",[e._v("员工类型：")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:e.search.typePerson,callback:function(t){e.$set(e.search,"typePerson",t)},expression:"search.typePerson"}},[a("el-option",[e._v("未选择")]),e._v(" "),e._l(e.stafftype,function(e){return a("el-option",{key:e.typePerson,attrs:{label:e.label,value:e.typePerson}})})],2)],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.AddShow}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"店铺名称",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e.choseshopname(t.row.carShopId)))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e.choseshopname(t.row.carShopId)))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.name))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.name))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.tel))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.tel))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"员工类型",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e.chosestafftype(t.row.typePerson)))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e.chosestafftype(t.row.typePerson)))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"绑定洗车模式信息",placement:"top"}},[a("i",{staticClass:"icon-See el-icon-search",on:{click:function(a){e.operation(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[a("i",{staticClass:"icon-change el-icon-edit",on:{click:function(a){e.changeShow(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteClick(t.row)}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.universal.exit?"修改":"添加",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("姓名：\n          ")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入联系人姓名"},model:{value:e.addB.name,callback:function(t){e.$set(e.addB,"name",t)},expression:"addB.name"}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("手机号：\n          ")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入手机号码"},model:{value:e.addB.tel,callback:function(t){e.$set(e.addB,"tel",t)},expression:"addB.tel"}}),e._v(" "),a("br"),e._v(" "),a("br")],1),e._v(" "),a("el-col",{attrs:{span:12}},[""==e.id?a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("店铺名称：\n          ")]):e._e(),e._v(" "),""==e.id?a("el-select",{attrs:{placeholder:"请选择店铺名称"},model:{value:e.addB.carShopId,callback:function(t){e.$set(e.addB,"carShopId",t)},expression:"addB.carShopId"}},[a("el-option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.shopList,function(e){return a("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})})],2):e._e(),e._v(" "),""==e.id?a("br"):e._e(),e._v(" "),""==e.id?a("br"):e._e(),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("员工类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择员工类型"},model:{value:e.addB.typePerson,callback:function(t){e.$set(e.addB,"typePerson",t)},expression:"addB.typePerson"}},[a("el-option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.stafftype,function(e){return a("el-option",{key:e.typePerson,attrs:{label:e.label,value:e.typePerson}})})],2),a("br"),a("br")],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),e.universal.exit?a("el-button",{staticClass:"oyButton",staticStyle:{"margin-top":"12px"},attrs:{type:"success"},on:{click:e.exitClick}},[e._v("保存")]):a("el-button",{staticClass:"oyButton",staticStyle:{"margin-top":"12px"},attrs:{type:"success"},on:{click:e.addClick}},[e._v("保存")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看",visible:e.universal.look},on:{"update:visible":function(t){e.$set(e.universal,"look",t)}}},[a("div",{staticClass:"letg"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("姓名：")]),e._v("\n          "+e._s(e.look.name)+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("员工类型：")]),e._v("\n          "+e._s(e.chosestafftype(e.look.typePerson))+"\n        ")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("手机号：")]),e._v("\n          "+e._s(e.look.tel)+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("店铺名称：")]),e._v("\n          "+e._s(e.choseshopname(e.look.carShopId))+"\n        ")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("总精洗次数：")]),e._v("\n          "+e._s(e.look.delicacyAllTimes)+"次\n        ")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("剩余精洗次数：")]),e._v(" "),a("div",[e._v(e._s(e.look.delicacyOnlyTimes)+"次")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("总普洗次数：")]),e._v("\n          "+e._s(e.look.commonAllTimes)+"次\n        ")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("剩余普洗次数：")]),e._v(" "),a("div",[e._v(e._s(e.look.commonOnlyTimes)+"次")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content",staticStyle:{width:"15%"}},[e._v("openId：")]),e._v(" "),a("div",[e._v(e._s(e.look.openid))])])],1)],1)]),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,15,20],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("Vxhb")},"data-v-eee0bffa",null);t.default=r.exports},Vxhb:function(e,t){}});