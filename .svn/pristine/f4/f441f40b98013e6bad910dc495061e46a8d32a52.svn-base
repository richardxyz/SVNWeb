webpackJsonp([68],{N8RL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("woOf"),i=s.n(a),l=s("Dd8w"),o=s.n(l),n=s("bOdI"),r=s.n(n),c=s("mw3O"),d=s.n(c),p=s("OMN4"),u=s.n(p),v=s("UMo0"),h=s("NYxO"),g={provide:function(){return{reload:this.reload}},inject:["reload"],name:"equipmentList",data:function(){var e;return e={moneypay:[{value:1,type:"进场"},{value:0,type:"离场"}],enter:[{value:1,type:"远程抓拍"},{value:0,type:"远程开闸"}],look:{parking_id:"",parking_name:"",parking_address:"",price:"",free_time:"",parking_lot_type:""},isRouterAlive:!0,formInline:{id:null,scene:"",project_name:"",submit_date:[new Date,new Date]},idtable:[],opencard:[],tableData5:[],online:[{value:2,type:"已绑定"},{value:3,type:"未绑定"}],multipleSelection:[],value1:"",levelList:[{value:"0",label:"管理卡"},{value:"1",label:"用户卡"}],level:"0",deviceType:"0",add1:{deviceld:"",protocol:"",sim:""},type1:{deviceType:""},li:[],added:"",send:{deviceId:"",title:"",timeOut:"",qos:""},cardList:[],change:{card:"",title:"",desc:"",tags:"",lon:"",lat:"",authInfo:"",deviceId:""},status:"",universal:{add:!1,change:!1,look:!1,send:!1,allotenter:!1},ICData:[],con:{id:"",protocol:"",create_time:"",auth_info:"",title:"",desc:"",tags:"",lon:"",lat:"",dataid:"",unit:"",unit_symbol:""}},r()(e,"li",[]),r()(e,"add",!1),r()(e,"topic",!1),r()(e,"conGroup",!1),r()(e,"change",!1),r()(e,"send",!1),r()(e,"see",!1),r()(e,"changeGroups",!1),r()(e,"changeGrouping",{changeGrouping:"",conId:""}),r()(e,"step",0),r()(e,"seeStep",1),r()(e,"paging",{page:1,pageSize:10,total:0}),r()(e,"allotenter",{id:"",str:"",brand:"",price:"",inout:""}),r()(e,"search",{deviceld:"",alias:"",isBind:""}),r()(e,"showchose",""),r()(e,"listtable",[]),r()(e,"tishi",!1),e},created:function(){this.add1.deviceType=this.levelList[0].label},computed:o()({},Object(h.e)({countc:function(e){return e.gate.gatelistcount}}),{tab:function(){return this.$store.getters.todoList}}),mounted:function(){this.searchClick(),document.title=this.$route.meta.title,0!=localStorage.getItem("dealer")?this.showchose=!0:this.showchose=!1,"123"==sessionStorage.getItem("dealer")&&(this.added=1)},methods:o()({},Object(h.b)(["gatepeople"]),{focus:function(){for(var e=0;e<this.listtable.length;e++)this.listtable[e].deviceld==this.add1.deviceld&&(this.tishi=!0)},innert:function(){""==this.add1.deviceld&&(this.tishi=!1),this.focus()},NO:function(){this.universal.allotenter=!1},chose:function(e){return""==e?"-":e},choses:function(e){return""==e?"未绑定":"已绑定"},handleSelectionChange:function(e){this.multipleSelection=e},addShow:function(){var e=this;this.tishi=!1,this.universal.add=!0,this.add1.deviceld="",this.add1.protocol="",this.add1.sim="";var t={page:this.paging.page,pageSize:1e6,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};Object(v._50)("/Device/brakeList",t).then(function(t){0==t.data.resCode&&(e.listtable=t.data.result)})},ICclick:function(){for(var e=this.multipleSelection,t=[],s=0;s<e.length;s++)t.push(e[s].deviceId),this.opencard=t,this.cardList=t;this.universal.look=!1},IChideclick:function(){this.universal.look=!1},deleteid:function(e){var t=this;console.log(e.id);var s=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),u()({method:"post",url:t.$store.state.http+"/Iccid/delete",data:d.a.stringify({id:e.id})}).then(function(t){console.log(t),0==t.data.resCode?(console.log(0xf6b75ab2bc47200),s.changeshow(e),s.$message({message:"删除成功",type:"success"})):s.$alert(t.data.result,"系统确认框",{confirmButtonText:"确定"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},next:function(){var e=this;0==this.step?u()({method:"post",url:e.$store.state.http+"/concode/conByCarBrand",data:d.a.stringify({conLocaid:e.addTo.list.conLocaid,carBrand:e.addTo.list.carBrand})}).then(function(t){if(console.log(t.data),0!=t.data.resCode)return e.$message.error("此定位器ID不存在"),e.addTo.list.conLocaid="",!1;console.log(t.data.result),e.step++>3&&(e.step=0,e.add=!1)}):e.step++>3&&(e.step=0,e.add=!1)},nextSee:function(){this.seeStep++>1&&(this.seeStep=1)},handleCurrentChange:function(e){this.paging.page=e,this.searchClick()},addClick:function(){var e=this;if(""==this.add1.deviceld)return this.$message.error("数据不能为空哦！"),!1;var t=this.add1;t.dealer=localStorage.getItem("dealer"),console.log(t),Object(v._50)("/Device/insert",t).then(function(t){0==t.data.resCode?(e.searchClick(),e.$message({message:"添加成功",type:"success"})):e.$message({message:t.data.result,type:"error"})}),this.universal.add=!1},deleteClick:function(e){var t=this,s=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e);var t={deviceId:e.deviceld};console.log(t),u()({method:"post",url:"http://39.104.113.112:2088/Device/delDeviceld",data:d.a.stringify(t)}).then(function(e){console.log(e),0==e.data.resCode?(s.searchClick(),s.$message({message:"删除成功",type:"success"})):-1==e.data.resCode?s.$message({message:"该设备已绑定停车场，解绑后可删除",type:"info"}):s.$alert(e.data.result,"系统确认框",{confirmButtonText:"确定"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeshow:function(e){this.universal.change=!0,this.change=i()({},e)},changeclick:function(e){if(""==this.change.weChatUseName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatUsePhone)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatUsePassword)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatFullName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatType)return this.$message.error("带*的数据不能为空哦！"),!1;var t=this,s=this.change;s.wechatUser=e.wechatUser,console.log(s),u()({method:"post",url:this.$store.state.http+"/wechatUser/update",data:d.a.stringify(s)}).then(function(e){console.log(e.data),0==e.data.resCode?(t.searchClick(),t.$message({message:"修改成功",type:"success"})):(t.searchClick(),t.$message({message:"修改失败",type:"error"}))}),this.universal.change=!1},seeClick:function(e){this.look.parking_lot_type="无",this.look.parking_name="无",this.look.parking_address="无",this.look.price="无",this.look.free_time="无",this.universal.look=!0,console.log(e);var t=this;u()({method:"post",url:"http://39.104.113.112:2088/Device/queryBindLot",data:d.a.stringify({deviceId:e.deviceld})}).then(function(e){if(console.log(e),0==e.data.resCode)switch(console.log(e),t.look=e.data.result,t.look.price=e.data.result.price+"元/小时",t.look.free_time=e.data.result.free_time+"分钟",e.data.result.parking_lot_type){case 1:t.look.parking_lot_type="居民小区";break;case 2:t.look.parking_lot_type="商圈停车场";break;case 3:t.look.parking_lot_type="路侧停车";break;case 4:t.look.parking_lot_type="公园景点";break;case 5:t.look.parking_lot_type="商务楼宇";break;case 6:t.look.parking_lot_type="其他";break;case 7:t.look.parking_lot_type="交通枢纽";break;case 8:t.look.parking_lot_type="市政设施";break;default:t.look.parking_lot_type="其它"}else 1==e.data.resCode&&(t.look.price="无")})},popup:function(e){console.log(e),this.universal.allotenter=!0,this.allotenter.id=e.deviceld},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.search.deviceld&&(e.deviceld=this.search.deviceld),this.search.alias&&(e.alias=this.search.alias),this.search.isBind&&("已绑定"==this.search.isBind?e.isBind=2:e.isBind=3),this.gatepeople(e)},reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})},changeGroup:function(e){var t=this;console.log(t.allotenter);var s={deviceid:t.allotenter.id};"远程开闸"==t.allotenter.str?s.str=0:"远程抓拍"==t.allotenter.str&&(s.str=1),console.log(s),u()({method:"post",url:"http://39.104.99.181:3011/wirite/single/openid",data:d.a.stringify(s)}).then(function(e){console.log(e),200==e.data.code?(t.searchClick(),t.$message({message:"发送成功",type:"success"})):t.$message({message:e.data.result,type:"error"}),t.universal.allotenter=!1})}})},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"PSTlist"}},[e._m(0),e._v(" "),s("div",{staticClass:"select"},[s("span",[e._v("道闸编号：")]),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入道闸编号"},model:{value:e.search.deviceld,callback:function(t){e.$set(e.search,"deviceld",t)},expression:"search.deviceld"}}),e._v(" "),s("span",[e._v("道闸名称：")]),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入道闸名称"},model:{value:e.search.alias,callback:function(t){e.$set(e.search,"alias",t)},expression:"search.alias"}}),e._v(" "),s("span",[e._v("绑定道闸：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.isBind,callback:function(t){e.$set(e.search,"isBind",t)},expression:"search.isBind"}},[s("el-option",[e._v("未选择")]),e._v(" "),e._l(e.online,function(e){return s("el-option",{key:e.id,attrs:{label:e.type,value:e.type}})})],2)],1),e._v(" "),s("div",{staticClass:"select"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showchose,expression:"showchose"}],staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addShow}},[e._v("添加")]),e._v(" "),s("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),s("el-dialog",{attrs:{title:"新增道闸设备",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[s("div",[s("span",{staticClass:"spanClassT"},[s("span",{staticClass:"aKey"},[e._v("*")]),e._v("道闸编号：")]),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入道闸编号"},on:{blur:function(t){e.focus()},focus:e.innert},model:{value:e.add1.deviceld,callback:function(t){e.$set(e.add1,"deviceld",t)},expression:"add1.deviceld"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.tishi,expression:"tishi"}]},[e._v("设备编号已存在")]),e._v(" "),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClassT"},[e._v("SIM卡号：")]),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入SIM卡号"},model:{value:e.add1.protocol,callback:function(t){e.$set(e.add1,"protocol",t)},expression:"add1.protocol"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClassT"},[e._v("协议版本号：")]),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入协议版本号"},model:{value:e.add1.sim,callback:function(t){e.$set(e.add1,"sim",t)},expression:"add1.sim"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClassT"},[e._v("备注：")]),e._v(" "),s("div",{staticClass:"little"},[e._v(e._s(this.$store.state.size))])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("添加")])],1)]),e._v(" "),s("el-dialog",{attrs:{title:"查看",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[s("div",[s("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.idtable}},[s("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{label:"设备卡ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.iccId))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.iccId))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"绑定设备"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceId))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceId))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[s("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(s){e.deleteid(t.row)}}})])]}}])})],1)],1)]),e._v(" "),s("el-dialog",{attrs:{title:"查看",visible:e.universal.look},on:{"update:visible":function(t){e.$set(e.universal,"look",t)}}},[s("div",{staticClass:"letg"},[s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content"},[e._v("停车场名称：")]),e._v(e._s(e.look.parking_name))]),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content"},[e._v("免费时长：")]),e._v(e._s(e.look.free_time))])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content"},[e._v("停车场类型：")]),e._v(e._s(e.look.parking_lot_type))]),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content"},[e._v("收费标准：")]),e._v(e._s(e.look.price))])],1),e._v(" "),s("div",{staticClass:"grid-content longsize"},[e._v("停车场地址：")]),e._v(" "),s("div",[e._v(e._s(e.look.parking_address))])],1)]),e._v(" "),s("div",{staticClass:"Content"},[s("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tab.a}},[s("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{label:"道闸名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e.chose(t.row.alias)))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(e.chose(t.row.alias)))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"道闸编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceld))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceld))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"版本号"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e._f("numnew")(t.row.protocol)))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(e._f("numnew")(t.row.protocol)))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"是否绑定停车场"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e.choses(t.row.alias)))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(e.choses(t.row.alias)))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"安装时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.date.time))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.date.time))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"远程控制",placement:"top"}},[s("i",{staticClass:"jilu iconfont icon-yuanchengkongzhi",on:{click:function(s){e.popup(t.row)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[s("i",{staticClass:"icon-See el-icon-search",on:{click:function(s){e.seeClick(t.row)}}})]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[s("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(s){e.deleteClick(t.row)}}})])]}}])})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"远程控制",visible:e.universal.allotenter},on:{"update:visible":function(t){e.$set(e.universal,"allotenter",t)}}},[s("div",[s("el-input",{staticStyle:{display:"none"},attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.allotenter.id,callback:function(t){e.$set(e.allotenter,"id",t)},expression:"allotenter.id"}}),e._v(" "),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("动作指令：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择设备状态"},model:{value:e.allotenter.str,callback:function(t){e.$set(e.allotenter,"str",t)},expression:"allotenter.str"}},[s("el-option",[e._v("未选择")]),e._v(" "),e._l(e.enter,function(e){return s("el-option",{key:e.id,attrs:{label:e.type,value:e.type}})})],2),s("br"),s("br")],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.NO}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.changeGroup}},[e._v("发送")])],1)]),e._v(" "),s("div",{staticClass:"footer"},[s("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.countc},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1),e._v(" "),e.isRouterAlive?s("router-view"):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("道闸列表")])])])}]};var f=s("VU/8")(g,_,!1,function(e){s("fkPf")},"data-v-38c5769e",null);t.default=f.exports},fkPf:function(e,t){}});