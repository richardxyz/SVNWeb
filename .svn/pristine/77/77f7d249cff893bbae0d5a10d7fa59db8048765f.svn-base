webpackJsonp([29],{"8pJa":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),l=a.n(s),i=a("woOf"),r=a.n(i),n=a("mw3O"),o=a.n(n),d=a("OMN4"),c=a.n(d),u={name:"equipmentList",data:function(){return{obj:[],activeName:"first",numw:[],numvalue:[],universal:{add:!1,change:!1},paging:{page:1,pageSize:10,total:0},tableData:[],search:{sim:""},add:{fauMode:"",fauName:"",fauSolve:"",fauCode:"",devId:""},change:{fauId:"",fauMode:"",fauName:"",fauSolve:"",fauCode:"",devId:""}}},mounted:function(){document.title=this.$route.meta.title,this.searchClick()},methods:{hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},addClick:function(){console.log(this.add);var e=this.add,t=this;console.log(e),c()({method:"post",url:this.$store.state.http+"/fault/add",data:o.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.resCode?t.searchClick():t.$message({message:"添加失败",type:"error"})}),t.universal.add=!1},deleteClick:function(e){var t=this;console.log(e);var a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c()({method:"post",url:t.$store.state.http+"/fault/delById",data:o.a.stringify({fauId:e.fauId})}).then(function(e){console.log(e.data),0==e.data.resCode?a.searchClick():a.$message({message:"删除失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeShow:function(e){this.universal.change=!0,this.change=r()({},e),console.log(e)},changeClick:function(){var e=this.change;delete e.date;var t=this;c()({method:"post",url:this.$store.state.http+"/fault/update",data:o.a.stringify(e)}).then(function(e){console.log(e.data),0==e.data.resCode?(t.$message({message:"修改成功",type:"success"}),t.searchClick()):t.$message({message:"修改失败",type:"error"})}),t.universal.change=!1},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.search.sim&&(e.sim=this.search.sim),console.log(e);var t=this;t.tableData=[],c()({method:"post",url:this.$store.state.http+"/parts/filte",data:o.a.stringify(e)}).then(function(e){if(console.log(e.data),0==e.data.resCode){for(var a=0;a<e.data.results.length;a++)e.data.results[a].hdate.time=t.common.timeToDate(l()(e.data.results[a].hdate.time).slice(0,10));for(var s=0;s<e.data.results.length;s++)0==e.data.results[s].start?e.data.results[s].start="未处理":1==e.data.results[s].start?e.data.results[s].start="正在处理":e.data.results[s].start="处理完成";t.paging.total=e.data.count,t.tableData=e.data.results}else t.tableData=[]})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"faultList"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("设备ID：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.sim,callback:function(t){e.$set(e.search,"sim",t)},expression:"search.sim"}})],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"归属客户",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v("美旅")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v("美旅")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系方式",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v("-")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v("-")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备型号",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.model))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.model))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ICCID",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.sim))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.sim))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.id))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.id))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.hdate.time))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.hdate.time))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"处理状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.start))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.start))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"生成保修单",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-printer",on:{click:function(t){e.universal.add=!0}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"400报修",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"查看设备历史维修记录",name:"first"}},[a("div",[a("span",{staticClass:"spanClass"},[e._v("预留手机号：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.devId,callback:function(t){e.$set(e.add,"devId",t)},expression:"add.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("用户名：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.fauMode,callback:function(t){e.$set(e.add,"fauMode",t)},expression:"add.fauMode"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("设备识别码：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.devId,callback:function(t){e.$set(e.add,"devId",t)},expression:"add.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("预约时间：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.devId,callback:function(t){e.$set(e.add,"devId",t)},expression:"add.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("所属地区：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.devId,callback:function(t){e.$set(e.add,"devId",t)},expression:"add.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("详细地址：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.devId,callback:function(t){e.$set(e.add,"devId",t)},expression:"add.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("投诉或建议：")]),e._v(" "),a("el-input",{staticClass:"textareaWidth",attrs:{disabled:!1,type:"textarea",rows:5,clearable:"",placeholder:"请输入内容"},model:{value:e.add.fauSolve,callback:function(t){e.$set(e.add,"fauSolve",t)},expression:"add.fauSolve"}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"选择终端用户以及设备",name:"second"}},[a("div")])],1)],e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("保存")])],1)],2),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",[a("span",{staticClass:"spanClass"},[e._v("设备型号：")]),e._v(" "),a("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.change.devId,callback:function(t){e.$set(e.change,"devId",t)},expression:"change.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("故障类型：")]),e._v(" "),a("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.change.fauMode,callback:function(t){e.$set(e.change,"fauMode",t)},expression:"change.fauMode"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("解决方法：")]),e._v(" "),a("el-input",{staticClass:"textareaWidth",attrs:{disabled:!1,type:"textarea",rows:5,clearable:"",placeholder:"请输入内容"},model:{value:e.change.fauSolve,callback:function(t){e.$set(e.change,"fauSolve",t)},expression:"change.fauSolve"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.hideclick}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.changeClick}},[e._v("修改")])],1)]),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[1,2,3,10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("电量管理")])])])}]};var p=a("VU/8")(u,v,!1,function(e){a("TpHZ")},"data-v-b4c6d6aa",null);t.default=p.exports},TpHZ:function(e,t){}});