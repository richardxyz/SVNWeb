webpackJsonp([28],{"58UM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mw3O"),i=a.n(s),c=a("OMN4"),n=a.n(c),r=a("UMo0"),o={name:"equipmentList",data:function(){return{changehuan:2,dishow:1,choseticket:"",obj:[],numw:[],ticket:"",numvalue:[],universal:{change:!1},paging:{page:1,pageSize:10,total:0},tableData:[],search:{carNumber:""},onsale_price:"",paid_price:"",longdate:"",startdate:"",paking_lot_name:"",carnumber:"",numlost:1}},mounted:function(){document.title=this.$route.meta.title},methods:{focus6:function(){/[\u4e00-\u9fa5]+/.test(this.change.paid_price)||""==this.change.paid_price||(this.change.paid_price=this.change.paid_price+"元")},changeboxticket:function(e){console.log(e),this.numlost=e?0:1},hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},changeShow:function(e){this.universal.change=!0,this.change.price=e.price+"元",this.change.paid_price=e.paid_price+"元",this.change.longdate=e.longdate,this.change.startdate=e.startdate,this.change.carnumber=e.carnumber,console.log(e)},changeClick:function(){var e=this;if(0==this.price)return this.$message({message:"无需支付，请驶离停车场",type:"success"}),!1;if(""==this.carnumber)return this.$message.error("请查询车牌详情再付款！"),!1;console.log(this.carnumber);var t={};if(0==this.numlost){if(""==this.ticket)return this.$message.error("优惠券码不能为空"),!1;var a={carNumber:this.carnumber,isTicket:this.numlost,ticketNumber:this.ticket};Object(r._50)("/cash/giveSale",a).then(function(t){console.log(t),"no"==t.data.fun?e.$message({message:"优惠券不存在,请核实",type:"error"}):(console.log(t.data.price),e.$confirm("支付金额"+t.data.price+"元，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r._50)("/cash/payByCash",a).then(function(t){0==t.data.resCode?(e.$message({message:"支付成功",type:"success"}),e.searchClick(),e.ticket="",e.changehuan=1):e.$message({message:"支付失败",type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消支付"})}))})}else 1==this.numlost&&(t.carNumber=this.carnumber,t.isTicket=this.numlost,Object(r._50)("/cash/payByCash",t).then(function(t){0==t.data.resCode?(e.$message({message:"支付成功",type:"success"}),e.searchClick(),e.ticket="",e.changehuan=1):e.$message({message:"支付失败",type:"error"})}))},searchClick:function(){if(""==this.search.carNumber)return this.$message.error("查询车牌不能为空"),!1;var e={page:this.paging.page,pageSize:this.paging.pageSize};this.search.carNumber&&(e.carNumber=this.search.carNumber),console.log(e);var t=this;t.tableData=[],n()({method:"post",url:"http://39.104.113.112:2088/cash/queryFee",data:i.a.stringify(e)}).then(function(e){console.log(e),-1==e.data.resCode?t.$message({message:e.data.remake,type:"error"}):(t.changehuan=2,t.dishow=5,t.onsale_price=e.data.onsale_price+"元",t.paid_price=e.data.paid_price+"元",t.longdate=e.data.longdate,t.startdate=e.data.startdate,t.paking_lot_name=e.data.paking_lot_name,t.time_out=e.data.time_out+"分钟",t.price=e.data.price+"元",t.carnumber=e.data.carnumber)}).catch(function(e){t.$message({message:"车牌信息错误",type:"error"}),t.search.carNumber=""})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"faultList"}},[e._m(0),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-bottom":"70px","margin-top":"70px"}},[a("span",{staticStyle:{"font-size":"20px"}},[e._v("车牌号码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.carNumber,callback:function(t){e.$set(e.search,"carNumber",t)},expression:"search.carNumber"}}),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"Content"},[5==e.dishow?a("div",{staticClass:"order identical"},[e._v("停车场名称："+e._s(e.paking_lot_name))]):e._e(),e._v(" "),1==e.dishow?a("div",{staticClass:"order identical"},[e._v("停车场名称：xxxxx")]):e._e(),e._v(" "),a("div",{staticClass:"identical"},[5==e.dishow?a("p",[e._v("入场时间："+e._s(e.startdate))]):e._e(),e._v(" "),1==e.dishow?a("p",[e._v("入场时间：xxxxx")]):e._e(),e._v(" "),5==e.dishow?a("p",{staticClass:"last"},[e._v("停车时长："+e._s(e.longdate))]):e._e(),e._v(" "),1==e.dishow?a("p",{staticClass:"last"},[e._v("停车时长：xxxxx")]):e._e()]),e._v(" "),a("div",{staticClass:"identical"},[5==e.dishow?a("p",[e._v("已付金额："+e._s(e.paid_price))]):e._e(),e._v(" "),1==e.dishow?a("p",[e._v("已付金额：xxxxx")]):e._e(),e._v(" "),5==e.dishow?a("p",{staticClass:"last"},[e._v("优惠金额："+e._s(e.onsale_price))]):e._e(),e._v(" "),1==e.dishow?a("p",{staticClass:"last"},[e._v("优惠金额：xxxxx")]):e._e()]),e._v(" "),a("div",{staticClass:"identical"},[5==e.dishow?a("p",[e._v("停车费用："+e._s(e.price))]):e._e(),e._v(" "),1==e.dishow?a("p",[e._v("停车费用：xxxxx")]):e._e(),e._v(" "),5==e.dishow?a("p",{staticClass:"last"},[e._v("超时时间："+e._s(e.time_out))]):e._e(),e._v(" "),1==e.dishow?a("p",{staticClass:"last"},[e._v("超时时间：xxxxx")]):e._e()]),e._v(" "),a("div",{staticClass:"identical"},[a("p",[a("el-checkbox",{on:{change:e.changeboxticket}}),e._v("\n          是否使用优惠券")],1),e._v(" "),a("p",{staticClass:"last"},[e._v("输入优惠券码：\n          "),a("el-input",{staticStyle:{width:"200px","margin-left":"-50px"},model:{value:e.ticket,callback:function(t){e.ticket=t},expression:"ticket"}})],1)]),e._v(" "),2==e.changehuan?a("div",{staticClass:"pay identical",staticStyle:{"margin-top":"40px"},on:{click:e.changeClick}},[e._v("支付")]):e._e(),e._v(" "),1==e.changehuan?a("div",{staticClass:"pay identical",staticStyle:{"margin-top":"40px"}},[e._v("支付")]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("现金支付")])])])}]};var l=a("VU/8")(o,h,!1,function(e){a("cZpd")},"data-v-c268928e",null);t.default=l.exports},cZpd:function(e,t){}});