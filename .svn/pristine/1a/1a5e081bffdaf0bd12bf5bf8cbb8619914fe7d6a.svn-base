(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b3cca31"],{"40a2":function(e,t,a){"use strict";var s=a("a8c8"),i=a.n(s);i.a},"6a58":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"addDevice"},[s("div",{staticClass:"addDeviceTop"},[s("div",[s("span",[e._v("设备: "),s("span",[e._v(e._s(e.deviceId))])]),s("span",{on:{click:e.sys}},[s("img",{attrs:{src:a("bdae"),alt:""}})])]),s("div",[s("span",[e._v("设备名称")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"deviceName",attrs:{type:"text",placeholder:"请输入设备名称"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),s("div",{staticClass:"add",on:{click:e.add}},[e._v("立即添加")])])},i=[],d=(a("433b"),a("d399")),n={name:"addDevice",data(){return{deviceId:2569874112,name:"",timer:""}},beforeDestroy(){clearTimeout(this.timer)},beforeCreate(){this.$axios.get(`${this.url}/weChat/message/JSSDKTicket?url=${encodeURIComponent(window.location.href.split("#")[0])}`).then(e=>{console.log(e),wx.config({debug:!1,appId:e.data.data.appId,timestamp:e.data.data.timestamp,nonceStr:e.data.data.nonceStr,signature:e.data.data.signature,jsApiList:["scanQRCode"]})})},created(){this.deviceId=this.$route.query.deviceId},methods:{sys(){let e=this;wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(t){console.log(t);let a=t.resultStr,s=a.substring(a.indexOf("state=")+6,a.indexOf("#"));e.$router.push({path:"/addDevice",query:{deviceId:s}})}})})},start(){},add(){let e={alias:this.name,userId:localStorage.getItem("openId"),deviceId:this.deviceId},t=this,a=this.url+"/device/dmInfo/bindDevice";console.log(e),this.$axios.post(a,JSON.stringify(e)).then(e=>{console.log(e),200==e.data.code?(Object(d["a"])(e.data.message),this.$router.push("/deviceList")):5e3==e.data.code?(Object(d["a"])(e.data.message),t.timer=setTimeout(()=>{t.$router.push("/deviceList")},1e3)):Object(d["a"])(e.data.message)})}}},c=n,o=(a("40a2"),a("2877")),r=Object(o["a"])(c,s,i,!1,null,"3c2c22a5",null);t["default"]=r.exports},a8c8:function(e,t,a){},bdae:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAYAAADFniADAAABEElEQVRYhe2YQU7DMBBFLfUAzUHCBk4F3KEcIcvq/Vjy3psWcY0ULlCxI6eoBBsHVSmIpC3yLPykv4mU8ZMT2aNxwBLYAJ9/RdJH0zSVm0EIoQL6KfWBZ2DpJL1MfGHIzRwp7309p76krRs9fAd2P0VSJ2k1R2hA0kpS91vttO63x7HUPsa4OGfRS4kxLoD9iZSkLofQQNrJk53a5ZRKn7FIFal/l3rLLPV6LNWnI+Gsg/GKUk9JqnchhGq9Xtc5hQa893UIYdbdWihMAriXtLUQYCPpYdxPmYgDDrklRjk44BZ4tJK2be9y/9KFyzB595nsEqz2U6Y7zyJVpK4qZXWWYG/qkmJjPmV1kmdu5vkF6WRKjulxFGYAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-5b3cca31.4bd71d8e.js.map