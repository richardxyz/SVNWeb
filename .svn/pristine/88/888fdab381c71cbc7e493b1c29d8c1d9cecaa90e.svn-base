webpackJsonp([80],{Bl3m:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=s("bOdI"),l=s.n(i),r=s("mvHQ"),o=s.n(r),n=s("Dd8w"),d=s.n(n),c=(s("mw3O"),s("OMN4"),s("NYxO")),u=s("UMo0"),_={name:"equipmentList",data:function(){return{pays:0,obj:[],numw:[],numvalue:[],universal:{change:!1,look:!1,add1:!1,release:!1},release:{car_number:"",issus_obj:""},tableDataadd:[],paging:{page:1,pageSize:10,total:""},tableData:[],search:{ticketType:"",use_status:"",useWay:"",ticketNumber:"",parking_id:""},fuzhi:"",look:{num:"",ticketType:"",ticketNumber:"",useWay:"",freeTime:"",full:"",sub:"",start_time:"",end_time:"",issus_type:"",isTeam:"",issus_obj:"",remark:""},value5:[],add1:{num:"",ticketType:"",useWay:"",percent:"",freeTime:"",full:"",sub:"",start_time:"",end_time:"",use_obj:"",issus_type:"",isTeam:"",remark:""},listorder:[],valtable:[],change:{trade_no:"",out_trade_no:"",pay_type:"",longdate:"",price:"",tmoney:"",pay_time:"",refund_reason:""},idreplace:"",showchose:"",tableDataSLIST:[]}},computed:d()({},Object(c.e)(["use_statuslist","usage","tickettype","Distributing","disbursement","parkingname"]),{parkIist:function(){return this.$store.state.ONEreslist}},Object(c.c)({parkingLotInfo:"getParkingLotInfo",parkingLotDevList:"getParkingLotDevList"})),mounted:function(){document.title=this.$route.meta.title,2==localStorage.getItem("userType")||123==localStorage.getItem("dealer")?this.showchose=!0:this.showchose=!1,this.searchClick();var e=this,t={page:e.paging.page,pageSize:10,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};e.parkname(t),Object(u._50)("/Parking/selectLotInfo",t).then(function(t){0==t.data.resCode?e.tableDataadd=t.data.result:e.tableData=[]}),console.log(this.parkingname)},methods:d()({},Object(c.b)(["parkname"]),(a={handleSelectionChange:function(e){this.tableDataSLIST=e},grant:function(e){console.log(e),this.universal.release=!0,this.release.freeTime="",this.release.issus_obj="",this.idreplace=e.id},isLicensePlate:function(e){return/^(([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z](([0-9]{5}[DF])|([DF]([A-HJ-NP-Z0-9])[0-9]{4})))|([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z][A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳使领]))$/.test(e)},grantyes:function(e){var t=this;return""==this.release.freeTime?(this.$message.error("手机号码不能为空"),!1):""==this.release.issus_obj&&""==this.release.freeTime?(this.$message.error("手机号码和车牌号码至少选择一个"),!1):this.release.issus_obj&&!this.isLicensePlate(this.release.issus_obj)?(this.$message.error("请输入正确的车牌号码"),!1):this.release.freeTime&&!Object(u._68)(this.release.freeTime)?(this.$message.error("请输入正确的手机号码"),!1):(Object(u._50)("/TicketInfo/issueTicket",{tel:this.release.freeTime,issus_obj:this.release.issus_obj,id:this.idreplace}).then(function(e){0==e.data.resCode?t.$message({message:"票券发放成功",type:"success"}):t.$message({message:"票券发放失败",type:"error"}),t.searchClick()}),void(this.universal.release=!1))},chose:function(e){for(var t=e.split(","),s=0;s<t.length;s++)for(var a=0;a<this.tableDataadd.length;a++){var i;if(t[s]==this.tableDataadd[a].parking_id)i=(i+=this.tableDataadd[a].parking_name+",").replace(/undefined/,"")}return console.log(i),i=void 0==i?"全部":i.slice(0,i.length-1)},ADD:function(){this.universal.add1=!0;var e=this;e.add1.num="",e.add1.ticketType="",e.add1.useWay="",e.add1.start_time="",e.add1.end_time="",e.add1.issus_type="",e.add1.isTeam="",e.add1.remark="",e.add1.freeTime="",e.add1.sub="",this.add1.percent="",this.add1.full="";var t={page:e.paging.page,pageSize:e.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};Object(u._50)("/Parking/selectLotInfo",t).then(function(t){0==t.data.resCode?e.tableDataadd=t.data.result:e.tableData=[]})},refresh:function(){var e=this;Object(u._50)("/TicketInfo/flushOverDue").then(function(t){console.log(t),"0"==t.data.resCode?e.$message({message:"失效票券刷新成功",type:"success"}):e.$message({message:"失效票券刷新失败",type:"error"})})},allefficacy:function(e){var t=this;console.log(e);var s="";e.forEach(function(e,t){s+=e.id+","});var a=s.substring(0,s.length-1);console.log(s);var i=this;this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u._50)("/TicketInfo/delById",{id:a}).then(function(e){0==e.data.resCode?(i.searchClick(),i.$message({message:"删除成功",type:"success"})):i.$message({message:"请勾选电子卡券",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},export2Excel:function(){var e={page:this.paging.page,pageSize:0==this.paging.total?1:this.paging.total,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")},t=this;Object(u._50)("/TicketInfo/selectTicketInfo",e).then(function(e){if(0==e.data.resCode){for(var a=0;a<e.data.result.length;a++)1==e.data.result[a].useWay?e.data.result[a].useWay="免费时长":2==e.data.result[a].useWay?e.data.result[a].useWay="现金抵用券":3==e.data.result[a].useWay?e.data.result[a].useWay="满减券":4==e.data.result[a].useWay&&(e.data.result[a].useWay="折扣券"),0==e.data.result[a].use_status?e.data.result[a].use_status="已使用":1==e.data.result[a].use_status?e.data.result[a].use_status="未使用":e.data.result[a].use_status="已失效",""==e.data.result[a].freeTime?e.data.result[a].freeTime="-":e.data.result[a].freeTime=e.data.result[a].freeTime+"分钟",""===e.data.result[a].sub?e.data.result[a].sub="-":e.data.result[a].sub=e.data.result[a].sub+"元",""===e.data.result[a].full?e.data.result[a].full="-":e.data.result[a].full=e.data.result[a].full+"元";t.listorder=e.data.result,console.log(t.listorder),new Promise(function(e){e()}).then(function(){var e=s("I7hd").export_json_to_excel,a=t.listorder;e(["使用方式","免费时长","需满金额","减去金额","使用状态","开始时间","结束时间"],t.formatJson(["useWay","freeTime","full","sub","use_status","start_time","end_time"],a),"电子卡券")}.bind(null,s)).catch(s.oe)}})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},focus6:function(){/[\u4e00-\u9fa5]+/.test(this.change.tmoney)||""==this.change.tmoney||(this.change.tmoney=this.change.tmoney+"元")},seeClick:function(e){console.log(e),this.look.isTeam=e.isTeam,this.look.issus_type=e.issus_type,this.look.num=e.num,this.look.remark=e.remark,this.look.ticketType=e.ticketType,this.look.useWay=e.useWay,this.look.full=e.full,this.look.freeTime=e.freeTime,this.look.start_time=e.start_time,this.look.end_time=e.end_time,this.look.sub=e.sub,this.look.parking_id=this.chose(e.parking_id),this.look.ticketNumber=e.ticketNumber,this.look.tel=e.tel,this.look.use_status=e.use_status,this.universal.look=!0},hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.paging.page=e,this.searchClick()},addClick:function(){console.log(this.add1.useWay);var e="1,2".split(",");console.log(e),console.log(o()(this.value5));for(var t=this.value5.length,s="",a=0;a<t;a++)s+=this.value5[a]+",";s=s.replace(/,$/,""),console.log(s);var i=new Date(this.add1.start_time),l=new Date(this.add1.end_time);if(console.log(l.getTime(l)),console.log(i.getTime(i)),l.getTime(l)<i.getTime(i))return this.$message.error("结束时间不能早于开始时间"),!1;if(isNaN(this.add1.freeTime))return this.$message.error("免费时长请输入数字"),!1;if(""==this.add1.ticketType||""==this.add1.useWay||""==this.add1.start_time||""==this.add1.end_time||""==this.add1.issus_type||""==this.add1.isTeam||""==this.add1.remark)return this.$message.error("带*的数据不能为空哦！"),!1;console.log(r);var r={};"多张"==this.add1.isTeam?(""==this.add1.full&&""!=this.add1.freeTime&&""==this.add1.sub&&(r.parking_id=s,r.num=this.add1.num,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.freeTime=this.add1.freeTime,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer")),""==this.add1.full&&""==this.add1.freeTime&&""!=this.add1.sub&&(r.parking_id=s,r.num=this.add1.num,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.sub=this.add1.sub,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer")),""!=this.add1.full&&""==this.add1.freeTime&&""!=this.add1.sub&&(r.parking_id=s,r.num=this.add1.num,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.sub=this.add1.sub,r.full=this.add1.full,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer")),""!==this.add1.percent&&(r.parking_id=s,r.num=this.add1.num,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.percent=this.add1.percent,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer"))):(""==this.add1.full&&""!=this.add1.freeTime&&""==this.add1.sub&&(console.log(90),r.parking_id=s,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.freeTime=this.add1.freeTime,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer")),""==this.add1.full&&""==this.add1.freeTime&&""!=this.add1.sub&&(r.parking_id=s,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.sub=this.add1.sub,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer")),""!=this.add1.full&&""==this.add1.freeTime&&""!=this.add1.sub&&(r.parking_id=s,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.sub=this.add1.sub,r.full=this.add1.full,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer")),""!==this.add1.percent&&(r.parking_id=s,r.ticketType=this.add1.ticketType,r.useWay=this.add1.useWay,r.start_time=this.add1.start_time,r.end_time=this.add1.end_time,r.percent=this.add1.percent,r.issus_type=this.add1.issus_type,r.isTeam=this.add1.isTeam,r.issus_obj=this.add1.issus_obj,r.remark=this.add1.remark,r.dealer=localStorage.getItem("dealer"))),"免费时长"==r.useWay?r.useWay=1:"现金抵用券"==r.useWay?r.useWay=2:"满减券"==r.useWay?r.useWay=3:"折扣"==r.useWay&&(r.useWay=4),"免费"==r.issus_type?r.issus_type=1:"收费"==r.issus_type?r.issus_type=2:r.issus_type=3,"电子券"==r.ticketType?r.ticketType=1:r.ticketType=2,"团体"==r.isTeam?(r.isTeam=0,console.log(this.numchose)):r.isTeam=1;var n=this;console.log(r),Object(u._50)("/TicketInfo/bornTicket",r).then(function(e){console.log(e),0==e.data.resCode?(n.searchClick(),n.$message({message:"生成成功",type:"success"})):n.$message({message:"生成失败",type:"error"})}),n.universal.add1=!1}},l()(a,"isLicensePlate",function(e){return/^(([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z](([0-9]{5}[DF])|([DF]([A-HJ-NP-Z0-9])[0-9]{4})))|([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z][A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳使领]))$/.test(e)}),l()(a,"deleteClick",function(e){var t=this;console.log(e);var s=this;this.$confirm("此操作将删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u._50)("/TicketInfo/delById",{id:e.id}).then(function(e){0==e.data.resCode?(s.searchClick(),s.$message({message:"删除成功",type:"success"})):s.$message({message:"删除失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}),l()(a,"searchClick",function(){var e={page:this.paging.page,pageSize:this.paging.pageSize,userId:localStorage.getItem("userId"),dealer:localStorage.getItem("dealer")};this.search.useWay&&(e.useWay=this.search.useWay),this.search.use_status&&(e.use_status=this.search.use_status),this.search.parking_id&&(e.parking_id=this.search.parking_id),this.search.ticketNumber&&(e.ticketNumber=this.search.ticketNumber),this.search.ticketType&&(e.ticketType=this.search.ticketType),console.log(e);var t=this;t.tableData=[],Object(u._50)("/TicketInfo/selectTicketInfo",e).then(function(e){if(0==e.data.resCode){for(var s=0;s<e.data.result.length;s++)""==e.data.result[s].freeTime?e.data.result[s].freeTime="-":e.data.result[s].freeTime=e.data.result[s].freeTime+"分钟",""===e.data.result[s].sub?e.data.result[s].sub="-":e.data.result[s].sub=e.data.result[s].sub+"元",""===e.data.result[s].full?e.data.result[s].full="-":e.data.result[s].full=e.data.result[s].full+"元";t.paging.total=e.data.count,t.tableData=e.data.result}else t.tableData=[]})}),a))},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"faultList"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("发放停车场：")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.search.parking_id,callback:function(t){e.$set(e.search,"parking_id",t)},expression:"search.parking_id"}},[a("el-option",[e._v("未选择")]),e._v(" "),e._l(e.parkIist,function(e){return a("el-option",{key:e.parking_id,attrs:{label:e.parking_name,value:e.parking_id}})})],2),e._v(" "),a("span",[e._v("卡券类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.ticketType,callback:function(t){e.$set(e.search,"ticketType",t)},expression:"search.ticketType"}},[a("el-option",[e._v("未选择")]),e._v(" "),e._l(e.tickettype,function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.value}})})],2),e._v(" "),a("span",[e._v("   使用方式：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.useWay,callback:function(t){e.$set(e.search,"useWay",t)},expression:"search.useWay"}},[a("el-option",[e._v("未选择")]),e._v(" "),e._l(e.usage,function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.value}})})],2),a("br"),a("br"),e._v(" "),a("span",[e._v("   使用状态：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.use_status,callback:function(t){e.$set(e.search,"use_status",t)},expression:"search.use_status"}},[a("el-option",[e._v("未选择")]),e._v(" "),e._l(e.use_statuslist,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})})],2)],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-download"},on:{click:e.export2Excel}},[e._v("导出")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showchose,expression:"showchose"}],staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.ADD}},[e._v("生成")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.allefficacy(e.tableDataSLIST)}}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{staticClass:"selection",attrs:{type:"selection",width:"55",prop:"uuid"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"发放停车场",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e.chose(t.row.parking_id)))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e.chose(t.row.parking_id)))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"车牌号码",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e._f("numnew")(t.row.issus_obj)))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e._f("numnew")(t.row.issus_obj)))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号码",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e._f("numnew")(t.row.tel)))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e._f("numnew")(t.row.tel)))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"卡券类型",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e._f("archtype")(t.row.ticketType)))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e._f("archtype")(t.row.ticketType)))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"使用方式",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[1==t.row.useWay?a("el-tag",{attrs:{color:"#5daf34"}},[e._v(e._s(e._f("userwaytyape")(t.row.useWay)))]):e._e(),e._v(" "),2==t.row.useWay?a("el-tag",{attrs:{color:"#f8c541"}},[e._v(e._s(e._f("userwaytyape")(t.row.useWay)))]):e._e(),e._v(" "),3==t.row.useWay?a("el-tag",{attrs:{color:"#c9521e"}},[e._v(e._s(e._f("userwaytyape")(t.row.useWay)))]):e._e(),e._v(" "),4==t.row.useWay?a("el-tag",{attrs:{color:"#c9521e"}},[e._v(e._s(e._f("userwaytyape")(t.row.useWay)))]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"免费时长",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.freeTime))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.freeTime))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"折扣金额",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(e._f("numnew")(t.row.percent/10+"折")))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(e._f("numnew")(t.row.percent/10+"折")))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"需满金额",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.full))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.full))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"减去金额",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.sub))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.sub))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"使用状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[2==t.row.use_status?a("el-tag",{attrs:{color:"rgb(20, 54, 167)"}},[e._v(e._s(e._f("statusele")(t.row.use_status)))]):e._e(),e._v(" "),1==t.row.use_status?a("el-tag",{attrs:{color:"#5daf34"}},[e._v(e._s(e._f("statusele")(t.row.use_status)))]):e._e(),e._v(" "),-1==t.row.use_status?a("el-tag",{attrs:{color:"#f8c541"}},[e._v(e._s(e._f("statusele")(t.row.use_status)))]):e._e(),e._v(" "),0==t.row.use_status?a("el-tag",{attrs:{color:"#c9521e"}},[e._v(e._s(e._f("statusele")(t.row.use_status)))]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"生效时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.start_time))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.start_time))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"失效时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.end_time))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.end_time))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("i",{staticClass:"icon-See el-icon-search",on:{click:function(s){e.seeClick(t.row)}}})]),e._v(" "),""!=t.row.issus_obj||""!=t.row.tel?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发放",placement:"top"}},[a("i",{staticClass:"jilu jilus iconfont icon-fafangyouhuiquan"})]):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发放",placement:"top"}},[a("i",{staticClass:"jilu iconfont icon-fafangyouhuiquan",on:{click:function(s){e.grant(t.row)}}})]),e._v(" "),1==t.row.use_status||0==t.row.use_status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除卡券",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(s){e.deleteClick(t.row)}}})]):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除失效券",placement:"top"}})]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"发放优惠券",visible:e.universal.release},on:{"update:visible":function(t){e.$set(e.universal,"release",t)}}},[a("div",[a("span",{staticClass:"spanClass spanchange"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("手机号码：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入手机号码"},model:{value:e.release.freeTime,callback:function(t){e.$set(e.release,"freeTime",t)},expression:"release.freeTime"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass spanchange"},[e._v("车牌号码：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入车牌号码"},model:{value:e.release.issus_obj,callback:function(t){e.$set(e.release,"issus_obj",t)},expression:"release.issus_obj"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.release=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.grantyes}},[e._v("确认")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看",visible:e.universal.look},on:{"update:visible":function(t){e.$set(e.universal,"look",t)}}},[a("div",{staticClass:"letg"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("卡券编码：")]),e._v(e._s(e.look.ticketNumber))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("使用方式：")]),e._v(e._s(e._f("userwaytyape")(e.look.useWay)))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("免费时长：")]),e._v(e._s(e.look.freeTime))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("发放类型：")]),e._v(e._s(e._f("issus_typefilter")(e.look.issus_type)))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("需满金额：")]),e._v(e._s(e.look.full))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("发放方式：")]),e._v(e._s(e._f("fangtype")(e.look.isTeam)))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("减去金额：")]),e._v(e._s(e.look.sub))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("卡券类型：")]),e._v(e._s(e._f("cardtype")(e.look.ticketType)))])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("使用状态：")]),e._v(e._s(e._f("shiyongtype")(e.look.use_status)))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("手机号码：")]),e._v(e._s(e._f("numnew")(e.look.tel)))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("开始时间：")]),e._v(e._s(e.look.start_time))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[e._v("结束时间：")]),e._v(e._s(e.look.end_time))]),e._v(" "),a("el-col",{attrs:{span:12}})],1),e._v(" "),a("div",{staticStyle:{width:"100%",display:"flex","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},[a("div",{staticStyle:{width:"106px","text-align":"right"}},[e._v("发放停车场：")]),e._v(" "),a("div",[e._v(e._s(e.look.parking_id))])]),e._v(" "),a("div",{staticStyle:{width:"100%",display:"flex","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},[a("div",{staticStyle:{width:"106px","text-align":"right"}},[e._v("发放说明：")]),e._v(" "),a("div",[e._v(e._s(e._f("sizes")(e.look.remark)))])])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"生成优惠券",visible:e.universal.add1},on:{"update:visible":function(t){e.$set(e.universal,"add1",t)}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("卡券类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.add1.ticketType,callback:function(t){e.$set(e.add1,"ticketType",t)},expression:"add1.ticketType"}},[a("el-option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.tickettype,function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.type}})})],2),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("发放方式：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择发放方式"},model:{value:e.add1.isTeam,callback:function(t){e.$set(e.add1,"isTeam",t)},expression:"add1.isTeam"}},[a("el-option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.disbursement,function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.type}})})],2),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("使用方式：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.add1.useWay,callback:function(t){e.$set(e.add1,"useWay",t)},expression:"add1.useWay"}},[a("el-option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.usage,function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.type}})})],2),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("发放类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择发放类型"},model:{value:e.add1.issus_type,callback:function(t){e.$set(e.add1,"issus_type",t)},expression:"add1.issus_type"}},[a("el-option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.Distributing,function(e){return a("el-option",{key:e.id,attrs:{label:e.type,value:e.type}})})],2),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("卡券开始时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add1.start_time,callback:function(t){e.$set(e.add1,"start_time",t)},expression:"add1.start_time"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("卡券结束时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.add1.end_time,callback:function(t){e.$set(e.add1,"end_time",t)},expression:"add1.end_time"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("备注：")]),e._v(" "),a("div",{staticClass:"little"},[e._v(e._s(this.$store.state.size))])],1),e._v(" "),a("el-col",{attrs:{span:12}},["多张"==this.add1.isTeam?a("div",[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("发放个数：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入发放个数"},model:{value:e.add1.num,callback:function(t){e.$set(e.add1,"num",t)},expression:"add1.num"}}),a("br"),a("br")],1):e._e(),e._v(" "),"免费时长"==this.add1.useWay?a("div",[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("免费时长：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入 如：30分钟"},model:{value:e.add1.freeTime,callback:function(t){e.$set(e.add1,"freeTime",t)},expression:"add1.freeTime"}}),a("br"),a("br")],1):e._e(),e._v(" "),"折扣"==this.add1.useWay?a("div",[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("折扣：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",maxlength:"2",placeholder:"请输入 如：30折"},model:{value:e.add1.percent,callback:function(t){e.$set(e.add1,"percent",t)},expression:"add1.percent"}}),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("例：30折扣即3折; 85折即为8.5折\n                  "),a("br")]),e._v(" "),a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:s("canc"),alt:""}})]),a("br"),a("br")],1):e._e(),e._v(" "),"满减券"==this.add1.useWay?a("div",[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("需满金额：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入免费时长"},model:{value:e.add1.full,callback:function(t){e.$set(e.add1,"full",t)},expression:"add1.full"}}),a("br"),a("br")],1):e._e(),e._v(" "),"满减券"==this.add1.useWay||"现金抵用券"==this.add1.useWay?a("div",[a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("减去金额：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入优惠金额"},model:{value:e.add1.sub,callback:function(t){e.$set(e.add1,"sub",t)},expression:"add1.sub"}}),a("br"),a("br")],1):e._e(),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("发放停车场：")]),e._v(" "),a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},e._l(e.tableDataadd,function(e){return a("el-option",{key:e.parking_id,attrs:{label:e.parking_name,value:e.parking_id}})})),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("不选默认券可用全部停车场"),a("br")]),e._v(" "),a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:s("canc"),alt:""}})]),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("发放说明：")]),e._v(" "),a("el-input",{staticClass:"textareaWidth",attrs:{disabled:!1,type:"textarea",rows:5,clearable:"",placeholder:"请输入内容"},model:{value:e.add1.remark,callback:function(t){e.$set(e.add1,"remark",t)},expression:"add1.remark"}}),a("br"),a("br")],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add1=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("生成")])],1)]),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[1,2,3,10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("电子卡券")])])])}]};var v=s("VU/8")(_,p,!1,function(e){s("Wffp")},"data-v-21d3bb4e",null);t.default=v.exports},Wffp:function(e,t){}});